syntax = "proto3";

package dnf.v1;

option go_package = "gen/dnf/v1";
option java_multiple_files = true;
option java_package = "com.dnfm.mina.protobuf.generated";
option java_outer_classname = "TownProto";

// ========== 数据结构 ==========

// 角色GUID
message CharacterGuid {
  uint64 charguid = 1;
  int32 type = 2;
  int32 posx = 3;
  int32 posy = 4;
}

// ========== 进入/离开城镇 ==========

// 进入城镇请求 (module=10100, cmd=0)
message EnterTownRequest {
  string authkey = 1;
  uint32 town = 2;
  uint32 area = 3;
  int32 posx = 4;
  int32 posy = 5;
}

// 进入城镇响应 (module=10100, cmd=1)
message EnterTownResponse {
  int32 error = 1;
  uint32 town = 2;
  uint32 area = 3;
  int32 posx = 4;
  int32 posy = 5;
  uint64 partyguid = 6;
  uint64 servertime = 7;
  int32 expratio = 8;
  int32 fatigueratio = 9;
  string version = 10;
}

// 离开城镇请求 (module=10109, cmd=0)
message LeaveFromTownRequest {
}

// 离开城镇响应 (module=10109, cmd=1)
message LeaveFromTownResponse {
  int32 error = 1;
}

// ========== 角色信息 ==========

// 角色信息请求 (module=10103, cmd=0)
message CharacterInfoRequest {
  string authkey = 1;
  int32 option = 2;
  repeated CharacterGuid charlist = 3;
}

// 角色信息响应 (module=10103, cmd=1)
message CharacterInfoResponse {
  int32 error = 1;
  repeated CharacterInfo charlist = 2;
}

// 角色信息（简化版）
message CharacterInfo {
  uint64 charguid = 1;
  int32 job = 2;
  int32 growtype = 3;
  int32 secondgrowtype = 4;
  int32 level = 5;
  string name = 6;
  uint64 gguid = 7;
  int32 posx = 8;
  int32 posy = 9;
  string gname = 10;
  int32 vip = 11;
  int32 vcreature = 12;
  int32 partydisturb = 13;
  int32 spoint = 14;
  int32 adventureunionlevel = 15;
  int64 adventureunionexp = 16;
  uint64 partyguid = 17;
  uint64 partyleaderguid = 18;
  int32 type = 19;
  int32 pvpstargrade = 20;
  int32 pvpstarcount = 21;
  bool blackdiamond = 22;
  uint32 avatarVisibleFlags = 23;
  int32 fairpvpstargrade = 24;
  int32 fairpvpstarcount = 25;
}

// ========== 城镇用户GUID列表 ==========

// 城镇用户GUID列表请求 (module=10106, cmd=0)
message TownUserGuidListRequest {
  int32 count = 1;
  int32 posx = 2;
  int32 posy = 3;
}

// 城镇用户GUID列表响应 (module=10106, cmd=1)
message TownUserGuidListResponse {
  int32 error = 1;
  repeated CharacterGuid charlist = 2;
}

// ========== 目标用户详情 ==========

// 目标用户详情请求 (module=10107, cmd=0)
message TargetUserDetailInfoRequest {
  uint64 targetguid = 1;
}

// 目标用户详情响应 (module=10107, cmd=1)
message TargetUserDetailInfoResponse {
  int32 error = 1;
  uint64 guid = 2;
  int32 world = 3;
  uint64 gguid = 4;
  string gmastername = 5;
  string name = 6;
  int32 exp = 7;
  int32 level = 8;
  int32 job = 9;
  int32 growtype = 10;
  int32 secgrowtype = 11;
  int32 equipscore = 12;
  int32 spoint = 13;
  int32 adventureunionlevel = 14;
  int64 adventureunionexp = 15;
  int32 characlistcount = 16;
  string gname = 17;
  int32 gmembergrade = 26;
  uint64 blackdiamond = 27;
  int32 creditscore = 28;
  int32 gamecenterinfo = 29;
  int32 qqVipinfo = 30;
  uint32 avatarVisibleFlags = 31;
  int32 totallike = 34;
  int32 like = 35;
  int32 rank = 36;
  int32 communionlevel = 38;
  int32 fame = 39;
  int32 charm = 40;
  int32 grade = 42;
  int32 gradeFair = 43;
  bool isadventureCondition = 44;
}

// ========== 交互菜单 ==========

// 交互菜单请求 (module=10108, cmd=0)
message InteractionMenuRequest {
  uint64 charguid = 1;
  int32 openmenutype = 2;
}

// 交互菜单响应 (module=10108, cmd=1)
message InteractionMenuResponse {
  int32 error = 1;
  uint64 charguid = 2;
  int32 online = 3;
  int32 status = 4;
  int64 lastlogout = 5;
  uint64 gguid = 6;
  int32 openmenutype = 7;
  int32 level = 8;
  int32 job = 9;
  int32 growtype = 10;
  int32 secgrowtype = 11;
  string name = 12;
  string gname = 13;
  int32 grade = 14;
  int32 qindex = 15;
  uint64 partyguid = 16;
  uint64 partyleader = 17;
  int32 publictype = 18;
  int32 creditscore = 19;
  int32 world = 20;
  string openid = 21;
  int32 platform = 22;
  uint32 platformserverid = 23;
  string adventureunionname = 24;
  int32 gamecenterinfo = 25;
  int32 qqVipinfo = 26;
  int32 characterframe = 27;
}
