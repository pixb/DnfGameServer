# 批次44: 多系统迁移计划

## 基本信息

- **批次名称**: batch_44
- **批次编号**: 44
- **迁移日期**: 2026-02-10
- **总文件数**: 50
- **Proto文件**: event_systems.proto

## 迁移目标

迁移50个JProtobuf文件，涵盖多个游戏系统的消息类型定义。

## 文件分类

### 1. 徽章系统 (1个)
- PT_EMBLEM - 徽章（已在multi_systems.proto中定义）

### 2. 入口系统 (1个)
- PT_ENTRANCE_ITEM - 入口物品（已在game_systems.proto中定义）

### 3. 装备系统 (3个)
- PT_EQUIP - 装备（已在common.proto中定义）
- PT_EQUIPPED - 已装备
- PT_EQUIP_INDEX_SLOT - 装备索引槽位（已在character.proto中定义）

### 4. 差事系统 (3个)
- PT_ERRAND_CLEAR - 差事清除（已在gameplay_systems.proto中定义）
- PT_ERRAND_INFO - 差事信息（已在gameplay_systems.proto中定义）
- PT_ERRAND_TODAY - 今日差事（已在gameplay_systems.proto中定义）

### 5. 护送系统 (5个)
- PT_ESCORT_GET_INFO - 获取护送信息
- PT_ESCORT_PARTY_INFO - 护送队伍信息
- PT_ESCORT_POINT_REWARD - 护送点数奖励
- PT_ESCORT_REQUEST_READY - 护送请求准备
- PT_ESCORT_START - 护送开始

### 6. 事件系统 (7个)
- PT_EVENT_CONDITION - 事件条件
- PT_EVENT_DATA - 事件数据
- PT_EVENT_DATA_FOR_CHARACTER - 角色事件数据
- PT_EVENT_ON_TIME - 定时事件
- PT_EVENT_REWARD_INFO - 事件奖励信息
- PT_EVENT_SCHEDULER - 事件调度器
- PT_EVENT_SELECT_INFO - 事件选择信息

### 7. 挖掘系统 (1个)
- PT_EXCAVATION_BOARD_TILE_INFO - 挖掘棋盘瓦片信息

### 8. 经验系统 (2个)
- PT_EXP_DETAILINFO - 经验详细信息
- PT_EXP_INFO - 经验信息

### 9. 设施系统 (1个)
- PT_FACILITY_INFO - 设施信息

### 10. 楼层系统 (3个)
- PT_FLOOR_INFO - 楼层信息
- PT_FLOOR_LIST - 楼层列表
- PT_FLOOR_RECORD - 楼层记录

### 11. 好友系统 (3个)
- PT_FRIEND_DAILY_CLOSENESS_INFO - 好友每日亲密度信息
- PT_FRIEND_INFO - 好友信息
- PT_FRIEND_RANK - 好友排名

## 迁移步骤

1. **分析文件结构**: 分析每个JProtobuf文件的字段类型和依赖关系
2. **创建Proto定义**: 创建event_systems.proto文件，定义所有消息类型
3. **解决依赖问题**: 处理与其他proto文件的依赖关系
4. **生成代码**: 使用buf工具生成Java和Go代码
5. **编写测试**: 编写单元测试验证序列化和反序列化
6. **验证编译**: 验证Java代码编译成功
7. **更新跟踪**: 更新迁移跟踪系统

## 预期结果

- 成功迁移50个JProtobuf文件
- 生成完整的Java和Go代码
- 所有测试通过
- Java编译成功

## 注意事项

1. 部分消息类型已在其他proto文件中定义（如PT_EMBLEM、PT_ENTRANCE_ITEM、PT_EQUIP、PT_EQUIP_INDEX_SLOT、PT_ERRAND_CLEAR、PT_ERRAND_INFO、PT_ERRAND_TODAY）
2. 需要正确处理嵌套消息类型（如PT_FLOOR_INFO包含多个其他消息类型）
3. 需要处理空消息类型（如PT_ESCORT_REQUEST_READY）
4. 需要处理枚举类型（如PT_FRIEND_INFO中的ENUM_MESSAGE_ASSISTANT_SWITCH_STATUS）
5. 需要定义一些辅助类型（如PT_POINT_INFO、PT_MAIN_EVENT_DATA、PT_APPENDAGE_EXP等）
