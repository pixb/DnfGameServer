# 批次34: 福利系统迁移计划

## 📋 批次概述

本批次将迁移福利系统相关的消息类型，包括福利奖励领取和信息查询功能。

## 🎯 迁移目标

### 消息列表

| ModuleID | 消息类型 | 功能描述 | Java类名 |
| :--- | :--- | :--- | :--- |
| -1 | 福利奖励领取 | 处理福利奖励领取请求 | RES_WELFARE_FIND_REWARD_GET |
| -1 | 福利奖励信息 | 处理福利奖励信息查询 | RES_WELFARE_FIND_REWARD_INFO |

### 数据结构

| 数据结构 | 功能描述 | Java类名 |
| :--- | :--- | :--- |
| 福利奖励信息 | 福利奖励详细信息 | PT_WELFARE_FIND_REWARD_INFO |
| 经验详情 | 经验详细信息 | PT_EXP_DETAILINFO |
| 附加经验 | 附加经验信息 | PT_APPENDAGE_EXP |

## 📁 文件组织

### Proto文件
- `/home/pix/dev/code/java/DnfGameServer/proto/dnf/v1/welfare.proto`

### 消息定义
- `WelfareRewardGetRequest` - 福利奖励领取请求
- `WelfareRewardGetResponse` - 福利奖励领取响应
- `WelfareRewardInfoRequest` - 福利奖励信息请求
- `WelfareRewardInfoResponse` - 福利奖励信息响应

### 数据类型定义
- `WelfareRewardInfo` - 福利奖励信息
- `ExpDetailInfo` - 经验详情
- `AppendageExp` - 附加经验

## 🔧 迁移步骤

1. **分析JProtobuf结构**
   - 分析RES_WELFARE_FIND_REWARD_GET的@Protobuf注解
   - 分析RES_WELFARE_FIND_REWARD_INFO的@Protobuf注解
   - 分析相关数据类型的@Protobuf注解

2. **生成Proto文件**
   - 创建welfare.proto文件
   - 定义消息类型和数据类型

3. **生成代码**
   - 使用buf工具生成Java代码
   - 使用buf工具生成Go代码

4. **编写测试**
   - 创建batch34_test.go
   - 编写序列化/反序列化测试用例

5. **验证编译**
   - 验证Java编译成功
   - 验证Go测试通过

6. **更新文档**
   - 记录迁移结果
   - 更新迁移统计

## 📊 预期统计

| 类别 | 预期数量 |
| :--- | :--- |
| 迁移消息 | 2 |
| 生成Proto文件 | 1 |
| 生成Java代码文件 | 6 |
| 生成Go代码文件 | 1 |
| 扩展编解码器方法 | 4 |
| Go单元测试用例 | 3 |

## ⚠️ 注意事项

1. **ModuleID为-1**: 这些消息的ModuleID为-1，需要特别注意处理
2. **经验计算**: 经验相关的计算逻辑需要保持一致
3. **奖励发放**: 奖励发放逻辑需要在业务层处理
4. **附加经验**: 附加经验可能来自不同的来源

## 🎯 下一步计划

批次35: 迁移世界Boss相关功能
