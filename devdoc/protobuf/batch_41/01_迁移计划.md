# 批次41: 多系统迁移计划

## 基本信息

- **批次名称**: batch_41
- **批次编号**: 41
- **迁移日期**: 2026-02-10
- **总文件数**: 40
- **Proto文件**: game_systems.proto

## 迁移目标

迁移40个JProtobuf文件，涵盖多个游戏系统的消息类型定义。

## 文件分类

### 1. 战斗联赛系统 (2个)
- PT_BATTLELEAGUE_REWARD_INFO - 战斗联赛奖励信息
- PT_BATTLELEAGUE_TRANSITION_CARD - 战斗联赛转换卡牌

### 2. 战斗通行证系统 (1个)
- PT_BATTLE_PASS_INFO - 战斗通行证信息

### 3. 黑名单系统 (1个)
- PT_BLACKLIST - 黑名单信息

### 4. 棋盘游戏系统 (5个)
- PT_BOARD_GAME_INFO - 棋盘游戏信息
- PT_BOARD_MOVE_RESULT - 棋盘移动结果
- PT_BOARD_INFO - 棋盘信息
- PT_BOARD_TILE_INFO - 棋盘瓦片信息
- PT_BOARD_USER_CONTENTS_INFO - 棋盘用户内容信息
- PT_BOARD_USER_MINIMUM_INFO - 棋盘用户最小信息

### 5. 书签系统 (1个)
- PT_BOOKMARK_ITEM - 书签物品

### 6. Buff系统 (2个)
- PT_BUFF - Buff信息
- PT_BUFF_LIST - Buff列表

### 7. 卡片系统 (2个)
- PT_CARD_ATTACH - 卡片附加
- PT_CARD_COMPOSE - 卡片合成

### 8. CERA商店系统 (3个)
- PT_CERA_SHOP_BUY - CERA商店购买
- PT_CERA_SHOP_INFO - CERA商店信息
- PT_CERA_SHOP_Mileage - CERA商店里程

### 9. 冠军系统 (3个)
- PT_CHAMPION_CHANGE - 冠军变更
- PT_CHAMPION_INFO - 冠军信息
- PT_CHAMPION_STAGE_INFO - 冠军阶段信息

### 10. Buff变更系统 (1个)
- PT_CHANGE_BUFF - Buff变更

### 11. 队伍变更系统 (1个)
- PT_CHANGE_TEAM_USER_INFO - 队伍变更用户信息

### 12. 频道系统 (2个)
- PT_CHANNEL - 频道
- PT_CHANNEL_INFO - 频道信息

### 13. 角色系统 (7个)
- PT_CHARACTER - 角色
- PT_CHARACTER_EQUIP_ONLY_INDEX - 角色装备仅索引
- PT_CHARACTER_GUID - 角色GUID
- PT_CHARACTER_GUILD_REDPACKET_INFO - 角色公会红包信息
- PT_CHARACTER_INFO - 角色信息
- PT_CHARACTER_RAID_DAMAGE_METER_INFO - 角色团队伤害仪表信息
- PT_CHARACTER_RAID_ROUND_INFO - 角色团队回合信息

### 14. 角色物品系统 (3个)
- PT_CHARGUID_ENTRANCE_ITEM - 角色GUID入场物品
- PT_CHARGUID_FATIGUE - 角色GUID疲劳
- PT_CHARGUID_TICKET - 角色GUID票据

### 15. 聊天系统 (4个)
- PT_CHAT - 聊天
- PT_CHAT_CHANNEL - 聊天频道
- PT_CHAT_SYNC - 聊天同步
- PT_CHAT_SYNC_INFO - 聊天同步信息

### 16. 骑士系统 (1个)
- PT_CHIVALRY - 骑士

## 迁移步骤

1. **分析文件结构**: 分析每个JProtobuf文件的字段类型和依赖关系
2. **创建Proto定义**: 创建game_systems.proto文件，定义所有消息类型
3. **解决依赖问题**: 处理与其他proto文件的依赖关系
4. **生成代码**: 使用buf工具生成Java和Go代码
5. **编写测试**: 编写单元测试验证序列化和反序列化
6. **验证编译**: 验证Java代码编译成功
7. **更新跟踪**: 更新迁移跟踪系统

## 预期结果

- 成功迁移40个JProtobuf文件
- 生成完整的Java和Go代码
- 所有测试通过
- Java编译成功

## 注意事项

1. 部分消息类型依赖于其他已定义的类型（如PT_BATTLELEAGUE_BUFF、PT_CHARACTER、PT_EQUIP、PT_AVATAR_ITEM等）
2. 需要正确处理UINT64、INT64等大整数类型
3. 需要处理嵌套消息类型和重复字段
4. 注意字段类型的正确映射（如FieldType.BOOL -> bool）
5. 需要定义一些辅助类型（如PT_EXCAVATION_BOARD_TILE_INFO、PT_SYSTEM_BUFF_APPENDAGE等）
