# 批次40: 多系统迁移计划

## 基本信息

- **批次名称**: batch_40
- **批次编号**: 40
- **迁移日期**: 2026-02-10
- **总文件数**: 40
- **Proto文件**: multi_systems.proto

## 迁移目标

迁移40个JProtobuf文件，涵盖多个游戏系统的消息类型定义。

## 文件分类

### 1. 账户系统 (1个)
- PT_ACCOUNT_TICKET - 账户票据信息

### 2. 成就系统 (1个)
- PT_ACHIEVEMENT_REWARD - 成就奖励信息

### 3. 战斗系统 (2个)
- PT_ACTION_COUNT_INFO - 动作计数信息
- PT_ACTIVE_STATUS_DAMAGE - 活跃状态伤害信息

### 4. AI系统 (2个)
- PT_AI_CHARACTER_DETAIL_INFO - AI角色详细信息
- PT_AI_CHARACTER_INFO - AI角色信息

### 5. 炼金术系统 (1个)
- PT_ALCHEMY_RECIPE_LIMIT - 炼金术配方限制

### 6. 奖励系统 (1个)
- PT_ALL_CLEAR_REWARD - 全清奖励信息

### 7. 技能系统 (1个)
- PT_ALL_SKILL_SLOT - 所有技能槽信息

### 8. 祭坛系统 (1个)
- PT_ALTAR_INFO - 祭坛信息

### 9. APC系统 (2个)
- PT_APC_CHARACTER - APC角色信息
- PT_APC_INFO - APC信息

### 10. 附魔系统 (2个)
- PT_APPENDAGE - 附魔信息
- PT_APPENDAGE_EXP - 附魔经验信息

### 11. 街机PVP系统 (1个)
- PT_ARCADE_PVP_INFO_CURRENCY - 街机PVP信息货币

### 12. 神器系统 (2个)
- PT_ARTIFACT - 神器信息
- PT_ARTIFACT_BASE_OPTION - 神器基础选项

### 13. 裂隙请求系统 (1个)
- PT_ATTACH_CRACK_REQUEST - 裂隙请求信息

### 14. 攻击小队系统 (6个)
- PT_ATTACK_SQUAD_ADVERTISEMENT - 攻击小队广告
- PT_ATTACK_SQUAD_BOARD_INFO - 攻击小队板信息
- PT_ATTACK_SQUAD_BOARD_USER_INFO - 攻击小队板用户信息
- PT_ATTACK_SQUAD_DETAIL_INFO - 攻击小队详细信息
- PT_ATTACK_SQUAD_MEMBER_INFO - 攻击小队成员信息
- PT_ATTACK_SQUAD_TIMER - 攻击小队计时器

### 15. 拍卖系统 (4个)
- PT_AUCTION_BASE - 拍卖基础信息
- PT_AUCTION_EQUIP - 拍卖装备信息
- PT_AUCTION_ITEM_INDEX - 拍卖物品索引
- PT_AUCTION_STACKABLE - 拍卖堆叠物品

### 16. 头像系统 (5个)
- PT_AVATAR_COMPOSE_MATERIAL - 头像合成材料
- PT_AVATAR_DISASAMBBLED_MATERIAL - 头像分解材料
- PT_AVATAR_GUID - 头像GUID
- PT_AVATAR_INDEX_SLOT - 头像索引槽
- PT_AVATAR_ITEM - 头像物品

### 17. 战场系统 (2个)
- PT_BATTLEFIELD_STATEINFO - 战场状态信息
- PT_BATTLEFIELD_TEAMINFO - 战场队伍信息

### 18. 战斗联赛系统 (5个)
- PT_BATTLELEAGUE_BUFF - 战斗联赛Buff
- PT_BATTLELEAGUE_CONTRIBUTE - 战斗联赛贡献
- PT_BATTLELEAGUE_PVE_RECORD - 战斗联赛PVE记录
- PT_BATTLELEAGUE_PVP_RECORD - 战斗联赛PVP记录
- PT_BATTLELEAGUE_REWARD - 战斗联赛奖励

## 迁移步骤

1. **分析文件结构**: 分析每个JProtobuf文件的字段类型和依赖关系
2. **创建Proto定义**: 创建multi_systems.proto文件，定义所有消息类型
3. **解决依赖问题**: 处理与其他proto文件的依赖关系
4. **生成代码**: 使用buf工具生成Java和Go代码
5. **编写测试**: 编写单元测试验证序列化和反序列化
6. **验证编译**: 验证Java代码编译成功
7. **更新跟踪**: 更新迁移跟踪系统

## 预期结果

- 成功迁移40个JProtobuf文件
- 生成完整的Java和Go代码
- 所有测试通过
- Java编译成功

## 注意事项

1. 部分消息类型依赖于其他已定义的类型（如PT_SKILL、PT_EQUIP、PT_AVATAR_ITEM等）
2. 需要正确处理UINT64、INT64等大整数类型
3. 需要处理嵌套消息类型和重复字段
4. 注意字段类型的正确映射（如FieldType.BOOL -> bool）
