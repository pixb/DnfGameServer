# æ‰¹æ¬¡36: æ¸¸æˆç³»ç»Ÿè¿ç§»è®¡åˆ’

## ğŸ“‹ æ‰¹æ¬¡æ¦‚è¿°

**æ‰¹æ¬¡åç§°**: batch_36
**æ‰¹æ¬¡åºå·**: 36
**æ¨¡å—åç§°**: æ¸¸æˆç³»ç»Ÿï¼ˆå¡”ã€è¯æ°´ã€è¡£æŸœã€ç§°å·ï¼‰
**ä¼˜å…ˆçº§**: 36

## ğŸ¯ è¿ç§»ç›®æ ‡

å°†æ¸¸æˆç³»ç»Ÿç›¸å…³çš„JProtobufæ¶ˆæ¯è¿ç§»åˆ°æ ‡å‡†Protobufï¼ŒåŒ…æ‹¬å¡”ç³»ç»Ÿã€è¯æ°´ç³»ç»Ÿã€è¡£æŸœç³»ç»Ÿå’Œç§°å·ç³»ç»Ÿã€‚

## ğŸ“Š è¿ç§»èŒƒå›´

### æ¶ˆæ¯åˆ—è¡¨

| ModuleID | CMD | æ¶ˆæ¯ç±»å‹ | åŠŸèƒ½æè¿° | çŠ¶æ€ |
| :--- | :--- | :--- | :--- | :--- |
| 11080 | 0 | REQ_TOWER_INFO | å¡”ä¿¡æ¯è¯·æ±‚ | å¾…è¿ç§» |
| 11080 | 1 | RES_TOWER_INFO | å¡”ä¿¡æ¯å“åº” | å¾…è¿ç§» |
| 11039 | 0 | REQ_TONIC_INFO | è¯æ°´ä¿¡æ¯è¯·æ±‚ | å¾…è¿ç§» |
| 11039 | 1 | RES_TONIC_INFO | è¯æ°´ä¿¡æ¯å“åº” | å¾…è¿ç§» |
| 11040 | 0 | REQ_TONIC_INIT | è¯æ°´åˆå§‹åŒ–è¯·æ±‚ | å¾…è¿ç§» |
| 11040 | 1 | RES_TONIC_INIT | è¯æ°´åˆå§‹åŒ–å“åº” | å¾…è¿ç§» |
| 11041 | 0 | REQ_TONIC_UPGRADE | è¯æ°´å‡çº§è¯·æ±‚ | å¾…è¿ç§» |
| 11041 | 1 | RES_TONIC_UPGRADE | è¯æ°´å‡çº§å“åº” | å¾…è¿ç§» |
| 14081 | 0 | REQ_WARDROBE_INFO | è¡£æŸœä¿¡æ¯è¯·æ±‚ | å¾…è¿ç§» |
| 14081 | 1 | RES_WARDROBE_INFO | è¡£æŸœä¿¡æ¯å“åº” | å¾…è¿ç§» |
| 14302 | 0 | REQ_WARDROBE_SET_SLOT | è¡£æŸœè®¾ç½®æ§½ä½è¯·æ±‚ | å¾…è¿ç§» |
| 14302 | 1 | RES_WARDROBE_SET_SLOT | è¡£æŸœè®¾ç½®æ§½ä½å“åº” | å¾…è¿ç§» |
| 14049 | 0 | REQ_TITLE_LIST | ç§°å·åˆ—è¡¨è¯·æ±‚ | å¾…è¿ç§» |
| 14049 | 1 | RES_TITLE_LIST | ç§°å·åˆ—è¡¨å“åº” | å¾…è¿ç§» |

### æ•°æ®ç»“æ„

| æ•°æ®ç»“æ„ | æè¿° | å­—æ®µ |
| :--- | :--- | :--- |
| PT_FLOOR_INFO | å¡”å±‚ä¿¡æ¯ | å¤šç§ç‰©å“åˆ—è¡¨ã€ç´¢å¼•ã€å±‚æ•°ã€æ—¶é—´ç­‰ |
| PT_TOWER_OF_ILLUSION_CLEAR_RATE | å¡”é€šå…³ç‡ | å±‚æ•°ã€ç™¾åˆ†æ¯” |
| PT_TONIC_INFO | è¯æ°´ä¿¡æ¯ | ç´¢å¼•ã€ç­‰çº§ |
| PT_TONIC_MATERIAL_USAGE | è¯æ°´ææ–™ä½¿ç”¨ | ç´¢å¼•ã€æ€»æ•° |
| PT_WARDROBE_INFO | è¡£æŸœä¿¡æ¯ | æ‰©å±•æ§½ã€åˆ—è¡¨ã€é™„åŠ æ§½ã€æ§½ä½ |

## ğŸ“ è¯¦ç»†åˆ†æ

### 1. å¡”ç³»ç»Ÿ (ModuleID: 11080)

#### REQ_TOWER_INFO
```java
@Protobuf(order = 1)
public Integer type;  // ç±»å‹
```

#### RES_TOWER_INFO
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public Integer clearfloor;  // é€šå…³å±‚æ•°

@Protobuf(order = 3)
public Integer type;  // ç±»å‹

@Protobuf(order = 4)
public Integer sweepcount;  // æ‰«è¡æ¬¡æ•°

@Protobuf(order = 5)
public List<PT_FLOOR_INFO> list;  // å±‚ä¿¡æ¯åˆ—è¡¨

@Protobuf(order = 6)
public Integer agp;  // AGP

@Protobuf(order = 7)
public Integer point;  // ç§¯åˆ†

@Protobuf(order = 8)
public List<PT_TOWER_OF_ILLUSION_CLEAR_RATE> clearrate;  // é€šå…³ç‡åˆ—è¡¨
```

### 2. è¯æ°´ç³»ç»Ÿ (ModuleID: 11039, 11040, 11041)

#### REQ_TONIC_INFO
```java
// æ— å­—æ®µ
```

#### RES_TONIC_INFO
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public List<PT_TONIC_INFO> crystaltonic;  // è¯æ°´åˆ—è¡¨

@Protobuf(order = 3)
public List<PT_TONIC_MATERIAL_USAGE> crystaltonicpoint;  // ææ–™ä½¿ç”¨åˆ—è¡¨
```

#### REQ_TONIC_INIT
```java
@Protobuf(order = 1)
public Integer index;  // ç´¢å¼•
```

#### RES_TONIC_INIT
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 3)
public List<PT_TONIC_INFO> crystaltonic;  // è¯æ°´åˆ—è¡¨

@Protobuf(order = 4)
public List<PT_TONIC_MATERIAL_USAGE> crystaltonicpoint;  // ææ–™ä½¿ç”¨åˆ—è¡¨

@Protobuf(order = 5)
public List<PT_MONEY_ITEM> currency;  // è´§å¸åˆ—è¡¨
```

#### REQ_TONIC_UPGRADE
```java
@Protobuf(order = 1)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 2)
public Boolean automode;  // è‡ªåŠ¨æ¨¡å¼
```

#### RES_TONIC_UPGRADE
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 3)
public List<PT_TONIC_INFO> crystaltonic;  // è¯æ°´åˆ—è¡¨

@Protobuf(order = 4)
public List<PT_TONIC_MATERIAL_USAGE> crystaltonicpoint;  // ææ–™ä½¿ç”¨åˆ—è¡¨

@Protobuf(order = 5)
public List<PT_MONEY_ITEM> currency;  // è´§å¸åˆ—è¡¨

@Protobuf(order = 6)
public PT_REMOVEITEMS removeitems;  // ç§»é™¤ç‰©å“
```

### 3. è¡£æŸœç³»ç»Ÿ (ModuleID: 14081, 14302)

#### REQ_WARDROBE_INFO
```java
// æ— å­—æ®µ
```

#### RES_WARDROBE_INFO
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public PT_WARDROBE_INFO wardrobe;  // è¡£æŸœä¿¡æ¯
```

#### REQ_WARDROBE_SET_SLOT
```java
@Protobuf(order = 1)
public Integer slot;  // æ§½ä½
```

#### RES_WARDROBE_SET_SLOT
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public Integer slot;  // æ§½ä½
```

### 4. ç§°å·ç³»ç»Ÿ (ModuleID: 14049)

#### REQ_TITLE_LIST
```java
// æ— å­—æ®µ
```

#### RES_TITLE_LIST
```java
@Protobuf(order = 1)
public Integer error;  // é”™è¯¯ç 

@Protobuf(order = 2)
public Integer page;  // é¡µç 

@Protobuf(order = 3)
public List<PT_EQUIP> title;  // ç§°å·åˆ—è¡¨

@Protobuf(order = 4)
public Integer maxcount;  // æœ€å¤§æ•°é‡
```

### 5. æ•°æ®ç»“æ„

#### PT_FLOOR_INFO
```java
@Protobuf(order = 1)
public List<PT_EQUIP> equipitems;  // è£…å¤‡ç‰©å“

@Protobuf(order = 2)
public List<PT_EQUIP> titleitems;  // ç§°å·ç‰©å“

@Protobuf(order = 3)
public List<PT_EQUIP> flagitems;  // æ——å¸œç‰©å“

@Protobuf(order = 4)
public List<PT_STACKABLE> materialitems;  // ææ–™ç‰©å“

@Protobuf(order = 5)
public List<PT_STACKABLE> consumeitems;  // æ¶ˆè€—ç‰©å“

@Protobuf(order = 6)
public List<PT_STACKABLE> emblemitems;  // å¾½ç« ç‰©å“

@Protobuf(order = 7)
public List<PT_STACKABLE> carditems;  // å¡ç‰‡ç‰©å“

@Protobuf(order = 8)
public List<PT_STACKABLE> epicpieceitems;  // å²è¯—ç¢ç‰‡ç‰©å“

@Protobuf(order = 9)
public List<PT_ARTIFACT> cartifactitems;  // ç¥å™¨ç‰©å“

@Protobuf(order = 10)
public List<PT_CREATURE> creatureitems;  // å® ç‰©ç‰©å“

@Protobuf(order = 11)
public List<PT_AVATAR_ITEM> avataritems;  // å¤´åƒç‰©å“

@Protobuf(order = 12)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 13)
public Integer count;  // æ•°é‡

@Protobuf(order = 14)
public Integer floor;  // å±‚æ•°

@Protobuf(order = 15)
public Long bestcleartime;  // æœ€ä½³é€šå…³æ—¶é—´

@Protobuf(order = 16)
public Long cleartime;  // é€šå…³æ—¶é—´

@Protobuf(order = 17)
public Integer sweeprewardcount;  // æ‰«è¡å¥–åŠ±æ•°é‡

@Protobuf(order = 18)
public Integer sweeprewardindex;  // æ‰«è¡å¥–åŠ±ç´¢å¼•
```

#### PT_TOWER_OF_ILLUSION_CLEAR_RATE
```java
@Protobuf(order = 1)
public Integer floor;  // å±‚æ•°

@Protobuf(order = 2)
public Float percent;  // ç™¾åˆ†æ¯”
```

#### PT_TONIC_INFO
```java
@Protobuf(order = 1)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 2)
public Integer level;  // ç­‰çº§
```

#### PT_TONIC_MATERIAL_USAGE
```java
@Protobuf(order = 1)
public Integer index;  // ç´¢å¼•

@Protobuf(order = 2)
public Integer total;  // æ€»æ•°
```

#### PT_WARDROBE_INFO
```java
@Protobuf(order = 1)
public Integer extentionslot;  // æ‰©å±•æ§½

@Protobuf(order = 2)
public List<PT_AVATAR_MANNEQUIN_INFO> list;  // åˆ—è¡¨

@Protobuf(order = 3)
public Integer appendageslot;  // é™„åŠ æ§½

@Protobuf(order = 4)
public Integer slot;  // æ§½ä½
```

## ğŸ”§ è¿ç§»æ­¥éª¤

### æ­¥éª¤1: åˆ›å»ºProtoæ–‡ä»¶
åˆ›å»º `gamesystems.proto` æ–‡ä»¶ï¼Œå®šä¹‰æ‰€æœ‰æ¶ˆæ¯ç±»å‹å’Œæ•°æ®ç»“æ„

### æ­¥éª¤2: ç”Ÿæˆä»£ç 
ä½¿ç”¨ buf å·¥å…·ç”Ÿæˆ Java å’Œ Go ä»£ç 

### æ­¥éª¤3: ç¼–å†™æµ‹è¯•
åˆ›å»º Go å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠŸèƒ½

### æ­¥éª¤4: éªŒè¯ç¼–è¯‘
éªŒè¯ Java ä»£ç ç¼–è¯‘æˆåŠŸ

### æ­¥éª¤5: æ›´æ–°è¿½è¸ªç³»ç»Ÿ
æ›´æ–°è¿ç§»è¿½è¸ªç³»ç»Ÿæ•°æ®åº“

## ğŸ“ æ–‡ä»¶ç»“æ„

```
proto/dnf/v1/
â”œâ”€â”€ gamesystems.proto       # æ¸¸æˆç³»ç»Ÿå®šä¹‰
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ModuleIDå¤šæ ·æ€§**: æ¸¸æˆç³»ç»Ÿä½¿ç”¨å¤šä¸ªä¸åŒçš„ ModuleIDï¼ˆ11080, 11039, 11040, 11041, 14081, 14302, 14049ï¼‰
2. **å¤æ‚çš„æ•°æ®ç»“æ„**: PT_FLOOR_INFO åŒ…å«å¤šç§ç‰©å“ç±»å‹åˆ—è¡¨ï¼Œéœ€è¦æ­£ç¡®å¤„ç†
3. **æµ®ç‚¹æ•°ç±»å‹**: PT_TOWER_OF_ILLUSION_CLEAR_RATE ä½¿ç”¨ float ç±»å‹
4. **ç©ºè¯·æ±‚**: å¤šä¸ªè¯·æ±‚æ¶ˆæ¯æ²¡æœ‰å­—æ®µï¼ˆå¦‚ REQ_TONIC_INFOã€REQ_WARDROBE_INFOã€REQ_TITLE_LISTï¼‰
5. **ä¾èµ–ç±»å‹**: éœ€è¦ä¾èµ–å¤šä¸ªå·²æœ‰çš„æ•°æ®ç»“æ„ï¼ˆPT_EQUIPã€PT_STACKABLEã€PT_ARTIFACTã€PT_CREATUREã€PT_AVATAR_ITEMã€PT_MONEY_ITEMã€PT_REMOVEITEMSã€PT_AVATAR_MANNEQUIN_INFOï¼‰

## ğŸ¯ é¢„æœŸç»“æœ

- åˆ›å»º 1 ä¸ª Proto æ–‡ä»¶
- ç”Ÿæˆ 28 ä¸ª Java ä»£ç æ–‡ä»¶ï¼ˆ14ä¸ªæ¶ˆæ¯ç±»å‹ Ã— 2ï¼‰
- ç”Ÿæˆ 1 ä¸ª Go ä»£ç æ–‡ä»¶
- ç¼–å†™ 4 ä¸ª Go æµ‹è¯•ç”¨ä¾‹
- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- Java ç¼–è¯‘æˆåŠŸ
