# 批次83迁移计划

## 基本信息

- **批次号**: 83
- **批次名称**: 多系统迁移
- **迁移状态**: 进行中
- **开始日期**: 2026-02-11
- **预计完成日期**: 2026-02-12

## 迁移目标

本次迁移旨在将JProtobuf格式的消息类型转换为标准Protobuf格式，涵盖游戏中多个系统的消息类型定义。

## 消息类型列表

| 序号 | 消息类型 | 描述 | 状态 |
|------|---------|------|------|
| 1 | ReqGuildSkillReset | 公会技能重置请求 | 待迁移 |
| 2 | ReqMinigameReward | 小游戏奖励请求 | 待迁移 |
| 3 | ReqRewardClaimConfirm | 奖励领取确认请求 | 待迁移 |
| 4 | ReqControlCenterInfo | 控制中心信息请求 | 待迁移 |
| 5 | ReqRaidTeamJoin | 突袭队伍加入请求 | 待迁移 |
| 6 | ResAttackSquadMemberInfo | 攻击小队成员信息 | 待迁移 |
| 7 | ResItemDisassemble | 物品分解响应 | 待迁移 |
| 8 | PtUserGold | 用户金币 | 待迁移 |
| 9 | ResInquirePowerRanking | 询问战斗力排名 | 待迁移 |
| 10 | ResPartyInviteConfirm | 派对邀请确认响应 | 待迁移 |
| 11 | ResEmblemUpgrade | 徽章升级响应 | 待迁移 |
| 12 | ResFriendRequest | 好友请求响应 | 待迁移 |
| 13 | ReqCeraBalance | 点券余额请求 | 待迁移 |
| 14 | ReqMessageDelete | 消息删除请求 | 待迁移 |
| 15 | ResVoiceChatInvite | 语音聊天邀请响应 | 待迁移 |
| 16 | ReqBoardPin | 留言板置顶请求 | 待迁移 |
| 17 | ResPvpBattleConfirm | PVP对战确认响应 | 待迁移 |
| 18 | ReqFacilityDemolish | 设施拆除请求 | 待迁移 |
| 19 | ReqTeamKick | 队伍踢人请求 | 待迁移 |
| 20 | ReqMoneyTransfer | 金钱转账请求 | 待迁移 |
| 21 | ReqItemSell | 道具出售请求 | 待迁移 |
| 22 | ReqSysAnnouncement | 系统公告请求 | 待迁移 |
| 23 | ReqGemEmbed | 装备镶嵌请求 | 待迁移 |
| 24 | ReqFatigueGift | 疲劳值赠送请求 | 待迁移 |
| 25 | ResLockstepConfirm | 同步确认响应 | 待迁移 |
| 26 | ReqWarehouseSort | 仓库整理请求 | 待迁移 |
| 27 | ReqDiningBuy | 餐厅购买请求 | 待迁移 |
| 28 | ResMenteeConfirm | 师徒系统确认响应 | 待迁移 |
| 29 | ResBingoConfirm | 宾果游戏确认响应 | 待迁移 |
| 30 | ReqChivalrySkill | 骑士团技能请求 | 待迁移 |
| 31 | ResSealConfirm | 封印系统确认响应 | 待迁移 |
| 32 | ResQuestTrack | 任务跟踪响应 | 待迁移 |
| 33 | ResQuestSubmit | 任务提交响应 | 待迁移 |
| 34 | ResQuestReward | 任务奖励响应 | 待迁移 |
| 35 | ReqControlCenterBuild | 控制中心建筑请求 | 待迁移 |
| 36 | ReqHistoricsiteInfo | 历史遗址信息请求 | 待迁移 |
| 37 | ResRaidConfirm | 突袭确认响应 | 待迁移 |
| 38 | ResUserInfoUpdate | 用户信息更新响应 | 待迁移 |
| 39 | ResRankingUpdate | 排名更新响应 | 待迁移 |
| 40 | ResPartyCreate | 派对创建响应 | 待迁移 |
| 41 | ResAttackSquadCreate | 攻击小队创建响应 | 待迁移 |
| 42 | ResMinigameCreate | 小游戏创建响应 | 待迁移 |
| 43 | ResMailSend | 邮件发送响应 | 待迁移 |
| 44 | ResGuildCreate | 公会创建响应 | 待迁移 |
| 45 | ResItemBuy | 物品购买响应 | 待迁移 |
| 46 | ResInteractionConfirm | 交互确认响应 | 待迁移 |
| 47 | ReqSkillLearn | 技能学习请求 | 待迁移 |
| 48 | ResQuestAcceptConfirm | 任务接受确认响应 | 待迁移 |
| 49 | ResQuestCompleteConfirm | 任务完成确认响应 | 待迁移 |
| 50 | ResQuestAbandonConfirm | 任务放弃确认响应 | 待迁移 |

## 迁移步骤

1. **分析消息类型**
   - 识别JProtobuf格式的消息类型
   - 分析字段结构和类型定义

2. **创建Proto文件**
   - 在`game_systems.proto`中添加消息类型定义
   - 确保字段类型和编号正确对应

3. **生成代码**
   - 使用`buf generate`命令生成Go和Java代码
   - 验证代码编译通过

4. **编写测试**
   - 创建`batch83_test.go`测试文件
   - 编写基本的消息创建测试用例

5. **验证迁移**
   - 运行测试验证消息类型正确性
   - 检查生成的代码是否符合项目规范

## 风险评估

- **风险等级**: 低
- **潜在问题**:
  - 字段类型映射错误
  - 消息编号冲突
  - 代码生成失败
- **缓解措施**:
  - 严格按照JProtobuf定义映射字段类型
  - 使用唯一的消息编号
  - 及时修复代码生成错误

## 相关文件

- **Proto文件**: `proto/dnf/v1/game_systems.proto`
- **测试文件**: `dnf-go-client/test/batch83_test.go`
- **迁移结果**: `devdoc/protobuf/batch_83/02_迁移结果.md`