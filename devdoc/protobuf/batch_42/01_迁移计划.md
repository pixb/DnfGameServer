# 批次42: 多系统迁移计划

## 基本信息

- **批次名称**: batch_42
- **批次编号**: 42
- **迁移日期**: 2026-02-10
- **总文件数**: 40
- **Proto文件**: gameplay_systems.proto

## 迁移目标

迁移40个JProtobuf文件，涵盖多个游戏系统的消息类型定义。

## 文件分类

### 1. 棋盘游戏系统 (1个)
- PT_BOARD_GAME_MOVE_RESULT - 棋盘游戏移动结果

### 2. 骑士系统 (2个)
- PT_CHIVALRY_CURRENCY_DAILY_GAIN - 骑士货币每日获取
- PT_CHIVALRY_MISSION - 骑士任务

### 3. 副本系统 (3个)
- PT_CLEAR_DUNGEON_INFO - 清除副本信息
- PT_CLEAR_DUNGEON_INFO_LIST - 清除副本信息列表
- PT_CLEAR_DUNGEON_STARREWARD - 清除副本星级奖励

### 4. 客户端系统 (1个)
- PT_CLIENTINFO - 客户端信息

### 5. 亲密度系统 (1个)
- PT_CLOSENESS_RESULT_INFO - 亲密度结果信息

### 6. 收集系统 (2个)
- PT_COLLECTION_INFO - 收集信息
- PT_COLLECTION_ITEM - 收集物品

### 7. 回归系统 (2个)
- PT_COMBACK_CHANNEL_INFO - 回归频道信息
- PT_COMEBACK_MATCHING_USERS - 回归匹配用户

### 8. 评论系统 (1个)
- PT_COMMENT - 评论

### 9. 社区礼物系统 (6个)
- PT_COMMUNITY_GIFT_DELETE_LOG - 社区礼物删除日志
- PT_COMMUNITY_GIFT_GUID_INFO - 社区礼物引导信息
- PT_COMMUNITY_GIFT_INFO - 社区礼物信息
- PT_COMMUNITY_GIFT_RECEIVER_INFO - 社区礼物接收者信息
- PT_COMMUNITY_GIFT_SENDER_INFO - 社区礼物发送者信息
- PT_COMMUNITY_GIFT_UNTIE_INFO - 社区礼物解绑信息

### 10. 任务系统 (1个)
- PT_COMPLETE_QUEST_INFO - 完成任务信息

### 11. 消耗系统 (2个)
- PT_CONSUME_ITEMS - 消耗物品
- PT_CONSUME_LIST - 消耗列表

### 12. 内容奖励系统 (1个)
- PT_CONTENTS_REWARD_INFO - 内容奖励信息

### 13. 控制系统 (2个)
- PT_CONTROL_GROUP_INVITE_ITEM - 控制组邀请物品
- PT_CONTROL_TRAININGROOM_CLEARINFO - 控制训练房清除信息

### 14. 裂隙系统 (1个)
- PT_CRACK - 裂隙

### 15. 生物系统 (6个)
- PT_CREATURE - 生物
- PT_CREATURE_COMMUNION - 生物共鸣
- PT_CREATURE_ERRAND - 生物差事
- PT_CREATURE_LEARN_SKILL_INFO - 生物学习技能信息
- PT_CREATURE_LEARN_SKILL_INFOS - 生物学习技能信息列表
- PT_CREATURE_RANDOM_OPTION - 生物随机选项
- PT_CREATURE_SKILL - 生物技能

### 16. 背包系统 (1个)
- PT_CUBE_ITEMS - 背包物品

### 17. 货币系统 (2个)
- PT_CURRENCY_DAILY_GAIN - 货币每日获取
- PT_CURRENCY_REWARD_INFO - 货币奖励信息

### 18. 自定义PVP系统 (2个)
- PT_CUSTOM_PVP_DATA - 自定义PVP数据
- PT_CUSTOM_PVP_ROOM_SETTING - 自定义PVP房间设置

### 19. 伤害分析系统 (1个)
- PT_DAMAGE_ANALYSIS - 伤害分析

### 20. 时间线系统 (1个)
- PT_DETAIL_TIME_LINE - 详细时间线

## 迁移步骤

1. **分析文件结构**: 分析每个JProtobuf文件的字段类型和依赖关系
2. **创建Proto定义**: 创建gameplay_systems.proto文件，定义所有消息类型
3. **解决依赖问题**: 处理与其他proto文件的依赖关系
4. **生成代码**: 使用buf工具生成Java和Go代码
5. **编写测试**: 编写单元测试验证序列化和反序列化
6. **验证编译**: 验证Java代码编译成功
7. **更新跟踪**: 更新迁移跟踪系统

## 预期结果

- 成功迁移40个JProtobuf文件
- 生成完整的Java和Go代码
- 所有测试通过
- Java编译成功

## 注意事项

1. 部分消息类型依赖于其他已定义的类型（如PT_BOARD_TILE_INFO、PT_BOARD_USER_CONTENTS_INFO、PT_STACKABLE等）
2. 需要正确处理MAP类型字段（如PT_CREATURE_COMMUNION中的slotInfos）
3. 需要处理枚举类型（如ENUM_CHIVALRY_MISSION、ENUM_CLIENT_BUILD_TYPE）
4. 需要定义一些辅助类型（如PT_REMOVEITEMS、PT_ITEM_REWARD_INFO、PT_CURRENCY_REWARD_INFO等）
5. 需要处理FLOAT类型字段（如PT_CLIENTINFO中的density）
