# 第70批迁移计划

## 批次信息
- **批次编号**: 70
- **迁移时间**: 2026-02-10
- **迁移文件数量**: 40
- **负责人员**: 系统自动

## 迁移目标
将第70批JProtobuf消息类型迁移到标准Protobuf格式，确保所有消息定义完整、正确，并生成相应的代码。

## 迁移步骤
1. **分析JProtobuf文件结构**
   - 识别所有消息类型的字段和类型
   - 确定消息之间的依赖关系

2. **添加缺失的消息定义**
   - 在 `game_systems.proto` 文件中添加缺失的消息类型
   - 确保所有字段定义正确

3. **生成代码**
   - 使用 `buf generate` 命令生成Java和Go代码
   - 验证生成的代码结构正确

4. **验证编译**
   - 运行 `mvn clean compile` 验证Java代码编译通过
   - 运行Go测试验证Go代码编译通过

5. **编写测试**
   - 创建 `batch70_test.go` 文件
   - 编写针对所有消息类型的测试用例
   - 验证测试通过

6. **更新数据库状态**
   - 将批次状态更新为 `completed`
   - 记录迁移的文件数量

7. **创建迁移报告**
   - 生成迁移计划和结果报告
   - 记录迁移过程中的问题和解决方案

## 迁移文件列表
1. PT_REWARD_CURRENCY_INFO
2. PT_INIT_SKILL
3. PT_EMBLEM_REQUEST
4. RELAY_FRAME_DATA_TYPES_REQ
5. NOTIFY_COMPLETE_QUEST
6. NOTIFY_GUILD_FISHING_DISASTER
7. REQ_ATTACK_SQUAD_ADD_RECRUIT
8. REQ_GUILD_DONATION_REQUEST_HELP_COMPLETE_INFO
9. RES_CREATURE_ERRAND_CANCEL
10. TYPE_TUTORIAL_LIST
11. PT_WEDDING_INVITATION
12. REQ_ACHIEVEMENT_LIST
13. PT_AUCTION_BASE
14. PT_GUILD_WAR_END_RESULT
15. FRAME_DATA_RES
16. NOTIFY_BATTLELEAGUE_NEXT_DUNGEON
17. RES_DELETE_BLACKLIST
18. SEND_CHAT_TYPES_REQ
19. PLAYER_INPUT
20. NOTIFY_FAILED_TO_ACQUIRE_TIMEBOX
21. REQ_ADVENTURE_UNION_SET_SHAREBOARD
22. RES_MINIGAME_RESTAURANT_START
23. PT_ADVENTURE_UNION_SHAREBOARD_FRAME
24. REQ_SET_PVP_CONTROL_MODE
25. RES_TOWN_USER_GUID_LIST
26. PT_ADVENTUREBOOK_ACHIEVE_CLEAR_CONDITION
27. PT_CHARACTER_GUID
28. PT_HISTORICSITE_STRATEGY_SLOT
29. PT_ITEMS
30. REQ_HALF_OPEN_PARTY_ACCEPT
31. RES_ARTIFACT_EQUIPPED_OPTION_CHANGE
32. RES_OPEN_TIME_BOX
33. REQ_ADVENTURE_UNION_GROW_COLLECTION_OTHER
34. PT_RANK_FRIEND_INFO
35. PT_MAP_OBJECT_DROP
36. RELAY_EQUIPMENTS_DATA_TYPES_NOTI
37. PT_COLLECTION_ITEM
38. RES_LOAD_MARRIAGE_INFO

## 预期结果
- 所有38个缺失消息类型成功迁移到标准Protobuf（2个已存在）
- Java代码编译通过
- Go测试代码编写完成
- 数据库状态更新为已完成
- 生成完整的迁移报告