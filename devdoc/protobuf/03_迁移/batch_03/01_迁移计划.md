# Batch 03 - ITEM 模块迁移计划

## 📋 批次信息

| 属性 | 值 |
|------|-----|
| 批次号 | 03 |
| 批次名称 | ITEM |
| 优先级 | P1 |
| 创建时间 | 2026-02-12 |
| 预计消息数 | 89 |

## 📊 消息列表

### JProtobuf 消息

| 序号 | JProtobuf 名称 | 文件路径 | 模块 | 类型 | ModuleID | 字段数 |
|------|----------------|---------|------|------|----------|--------|
| 1 | REQ_ADD_WATCHING_BOOKMARK | REQ_ADD_WATCHING_BOOKMARK.java | ITEM | REQ | 14001 | 1 |
| 2 | REQ_ADVENTUREBOOK_SPECIAL_REWARD | REQ_ADVENTUREBOOK_SPECIAL_REWARD.java | ITEM | REQ | 14002 | 5 |
| 3 | REQ_ADVENTUREBOOK_TERA_REWARD | REQ_ADVENTUREBOOK_TERA_REWARD.java | ITEM | REQ | 14003 | 2 |
| 4 | REQ_ADVENTURE_AUTO_SEARCH_MINI_GAME | REQ_ADVENTURE_AUTO_SEARCH_MINI_GAME.java | ITEM | REQ | 14004 | 0 |
| 5 | REQ_ADVENTURE_AUTO_SEARCH_REWARD | REQ_ADVENTURE_AUTO_SEARCH_REWARD.java | ITEM | REQ | 14005 | 2 |
| 6 | REQ_ADVENTURE_DATA | REQ_ADVENTURE_DATA.java | ITEM | REQ | 14006 | 0 |
| 7 | REQ_ADVENTURE_UNION_REPRESENT_CHARACTER_CHANGE | REQ_ADVENTURE_UNION_REPRESENT_CHARACTER_CHANGE.java | ITEM | REQ | 14007 | 1 |
| 8 | REQ_ADVENTURE_UNION_SET_COLLECTION_SLOT | REQ_ADVENTURE_UNION_SET_COLLECTION_SLOT.java | ITEM | REQ | 14008 | 2 |
| 9 | REQ_APPLY_GUILD_NPC_SKIN | REQ_APPLY_GUILD_NPC_SKIN.java | ITEM | REQ | 14009 | 1 |
| 10 | REQ_ARRANGE_GUILD_STRUCTURE | REQ_ARRANGE_GUILD_STRUCTURE.java | ITEM | REQ | 14010 | 4 |
| 11 | REQ_ARTIFACT_EQUIPPED_OPTION_CHANGE | REQ_ARTIFACT_EQUIPPED_OPTION_CHANGE.java | ITEM | REQ | 14011 | 3 |
| 12 | REQ_ARTIFACT_INVEN_OPTION_CHANGE | REQ_ARTIFACT_INVEN_OPTION_CHANGE.java | ITEM | REQ | 14012 | 1 |
| 13 | REQ_AUCTION_DETAIL_ITEM_LIST | REQ_AUCTION_DETAIL_ITEM_LIST.java | ITEM | REQ | 14013 | 3 |
| 14 | REQ_BATTLE_PASS_RANKING | REQ_BATTLE_PASS_RANKING.java | ITEM | REQ | 14014 | 0 |
| 15 | REQ_BILING_INFO | REQ_BILING_INFO.java | ITEM | REQ | 14015 | 4 |
| 16 | REQ_BILING_KR_VERIFY | REQ_BILING_KR_VERIFY.java | ITEM | REQ | 14016 | 6 |
| 17 | REQ_BLACK_DIAMON_GET_BUCKET | REQ_BLACK_DIAMON_GET_BUCKET.java | ITEM | REQ | 14017 | 0 |
| 18 | REQ_BLACK_DIAMON_GET_REWARD | REQ_BLACK_DIAMON_GET_REWARD.java | ITEM | REQ | 14018 | 1 |
| 19 | REQ_BUY_TICKET | REQ_BUY_TICKET.java | ITEM | REQ | 14019 | 2 |
| 20 | REQ_CANCEL_ATTACK_SQUAD_JOIN | REQ_CANCEL_ATTACK_SQUAD_JOIN.java | ITEM | REQ | 14020 | 2 |

> 注：以上仅列出前 20 个消息，完整列表请参考数据库查询结果。

## 🎯 迁移目标

将 ITEM 模块的 89 个 REQ 消息从 JProtobuf 迁移到标准 Protobuf。

## 📝 迁移步骤

### 1. 创建 proto 文件

创建 `proto/dnf/v1/item.proto` 文件，定义所有 ITEM 模块的消息。

### 2. 生成代码

使用 protoc 生成 Java 和 Go 代码。

### 3. 生成测试用例

使用 `generate_go_tests.py` 生成 Go 测试用例。

### 4. 编译验证

编译 Java 服务器，验证生成的代码。

### 5. 运行测试

运行 Go 测试用例，验证消息序列化和反序列化。

### 6. 更新记录

更新数据库中的迁移记录。

## ⚠️ 注意事项

1. ITEM 模块消息较多，建议分批处理
2. 注意消息之间的依赖关系
3. 确保字段类型正确映射
4. 验证枚举类型的迁移
