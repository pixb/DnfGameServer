# TC005: 公会捐赠

## 测试目标
验证玩家能够成功向公会捐赠资源，包括金币、钻石、材料等。

## 测试环境
- 服务器状态：正常运行
- 客户端：Java测试客户端
- 网络环境：本地网络

## 测试步骤

### 步骤1: 建立TCP连接
- 客户端与服务器建立TCP连接
- 验证连接成功

### 步骤2: 构造登录请求
- 创建 `REQ_LOGIN` 对象
- 设置 `openid`、`type`、`token`、`platID`、`version`、`clientIP` 等字段

### 步骤3: 编码登录请求
- 使用 `MessageCodec` 编码登录请求
- 验证编码成功

### 步骤4: 发送登录请求
- 向服务器发送编码后的登录请求
- 验证发送成功

### 步骤5: 接收登录响应
- 接收服务器返回的登录响应
- 验证响应数据长度正确

### 步骤6: 解码登录响应
- 使用 `MessageCodec` 解码登录响应
- 验证解码成功，响应类型为 `RES_LOGIN`

### 步骤7: 验证登录成功
- 检查 `RES_LOGIN` 对象中的 `error` 字段是否为 `null`
- 检查 `RES_LOGIN` 对象中的 `authkey` 字段是否不为 `null`
- 验证登录成功

### 步骤8: 构造公会捐赠请求
- 创建公会捐赠请求对象
- 设置捐赠类型、捐赠数量等相关参数

### 步骤9: 编码公会捐赠请求
- 使用 `MessageCodec` 编码公会捐赠请求
- 验证编码成功

### 步骤10: 发送公会捐赠请求
- 向服务器发送编码后的公会捐赠请求
- 验证发送成功

### 步骤11: 接收公会捐赠响应
- 接收服务器返回的公会捐赠响应
- 验证响应数据长度正确

### 步骤12: 验证公会捐赠响应
- 使用 `MessageCodec` 解码公会捐赠响应
- 验证解码成功，响应类型正确
- 检查响应中的捐赠结果是否正确
- 验证公会捐赠测试通过

## 预期结果
- 登录成功
- 公会捐赠请求发送成功
- 收到正确的公会捐赠响应
- 公会捐赠成功，玩家的资源减少，公会的资源增加

## 测试数据
- 测试账号：`test_openid_010`
- 测试角色：`role_guid_010`
- 公会ID：1001
- 捐赠类型：金币
- 捐赠数量：10000

## 测试脚本
```java
// 测试脚本代码
```

## 备注
- 确保服务器已正常启动
- 确保测试账号已存在
- 确保测试角色已创建
- 确保测试角色已加入目标公会
- 确保测试角色有足够的资源进行捐赠
