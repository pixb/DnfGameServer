# TC010_成就系统边界测试

## 测试用例信息

- **测试用例ID**: TC010
- **测试用例名称**: 成就系统边界测试
- **测试类型**: 边界测试
- **优先级**: 中
- **关联模块**: 成就系统
- **测试环境**:
  - JDK 17+
  - Maven 3.6+
  - MySQL 8.0+
  - 游戏服务器运行中

## 测试目标

验证成就系统在各种边界情况下的行为，包括无效参数、极端值、异常情况等，确保系统的健壮性和稳定性。

## 测试前置条件

1. 游戏服务器已启动并正常运行
2. 玩家已成功登录游戏
3. 玩家已选择角色进入游戏

## 测试数据

| 字段名 | 类型 | 值 | 说明 |
|-------|------|-----|------|
| openid | String | test_openid_010 | 测试用OpenID |
| version | String | 1.0.0 | 客户端版本号 |
| clientIP | String | 127.0.0.1 | 客户端IP地址 |
| roleGuid | String | role_guid_010 | 角色GUID |
| invalidAchievementId | int | 999999 | 无效的成就ID |
| negativeProgress | int | -1 | 负数进度值 |
| excessiveProgress | int | 999999 | 超过最大值的进度值 |
| largeBatchSize | int | 1000 | 大批量获取成就数量 |

## 测试步骤

### 场景1: 无效成就ID测试

1. **连接服务器**
   - 建立与游戏服务器的TCP连接
   - 验证连接是否成功

2. **发送登录请求**
   - 构造REQ_LOGIN消息
   - 发送登录请求到服务器
   - 接收并解析登录响应
   - 验证登录是否成功

3. **发送获取角色列表请求**
   - 构造REQ_GET_ROLE_LIST消息
   - 发送请求到服务器
   - 接收并解析角色列表响应
   - 验证是否获取到角色列表

4. **发送选择角色请求**
   - 构造REQ_SELECT_ROLE消息
   - 发送请求到服务器
   - 接收并解析选择角色响应
   - 验证是否成功选择角色

5. **发送获取无效成就详情请求**
   - 构造REQ_GET_ACHIEVEMENT_DETAIL消息
   - 设置成就ID为测试数据中的invalidAchievementId
   - 发送请求到服务器
   - 接收并解析获取成就详情响应

6. **验证无效成就ID响应**
   - 验证响应是否失败
   - 验证错误信息是否合理

### 场景2: 负数进度值测试

7. **发送负数进度更新请求**
   - 构造成就进度更新请求
   - 设置成就ID为有效的成就ID
   - 设置进度为测试数据中的negativeProgress
   - 发送请求到服务器
   - 接收并解析成就进度更新响应

8. **验证负数进度值响应**
   - 验证响应是否失败
   - 验证错误信息是否合理

### 场景3: 超过最大值的进度值测试

9. **发送超过最大值的进度更新请求**
   - 构造成就进度更新请求
   - 设置成就ID为有效的成就ID
   - 设置进度为测试数据中的excessiveProgress
   - 发送请求到服务器
   - 接收并解析成就进度更新响应

10. **验证超过最大值的进度值响应**
    - 验证响应是否处理合理
    - 验证进度是否被限制在合理范围内

### 场景4: 大批量获取成就测试

11. **发送大批量获取成就请求**
    - 构造批量获取成就请求
    - 设置批量大小为测试数据中的largeBatchSize
    - 发送请求到服务器
    - 接收并解析批量获取成就响应

12. **验证大批量获取成就响应**
    - 验证响应是否成功
    - 验证返回的数据量是否合理

### 场景5: 频繁请求测试

13. **发送多次重复请求**
    - 连续发送多次相同的成就请求（如获取成就列表）
    - 验证服务器是否能够处理频繁请求

14. **验证频繁请求响应**
    - 验证所有响应是否成功
    - 验证服务器是否稳定

15. **断开连接**
    - 关闭与服务器的TCP连接

## 预期结果

1. **无效成就ID测试**:
   - 服务器返回失败响应
   - 错误信息明确指出成就不存在

2. **负数进度值测试**:
   - 服务器返回失败响应
   - 错误信息明确指出进度值无效

3. **超过最大值的进度值测试**:
   - 服务器返回成功响应
   - 进度被限制在合理范围内（如不超过目标进度）

4. **大批量获取成就测试**:
   - 服务器返回成功响应
   - 返回的数据量合理（可能被限制在最大批量大小）

5. **频繁请求测试**:
   - 服务器能够处理所有请求
   - 所有响应都成功
   - 服务器保持稳定

## 测试异常处理

1. **服务器未运行**
   - 预期：连接失败，测试终止
   - 处理：启动服务器后重新测试

2. **登录失败**
   - 预期：登录响应失败，测试终止
   - 处理：检查登录参数后重新测试

3. **选择角色失败**
   - 预期：选择角色响应失败，测试终止
   - 处理：检查角色GUID后重新测试

4. **边界测试响应异常**
   - 预期：响应应包含合理的错误信息
   - 处理：检查服务器实现后重新测试

## 测试后清理

1. 关闭测试连接
2. 清理测试数据（如需要）

## 测试执行记录

| 执行步骤 | 执行时间 | 执行结果 | 问题描述 | 处理方式 |
|---------|---------|---------|---------|----------|
| 1 | - | - | - | - |
| 2 | - | - | - | - |
| 3 | - | - | - | - |
| 4 | - | - | - | - |
| 5 | - | - | - | - |
| 6 | - | - | - | - |
| 7 | - | - | - | - |
| 8 | - | - | - | - |
| 9 | - | - | - | - |
| 10 | - | - | - | - |
| 11 | - | - | - | - |
| 12 | - | - | - | - |
| 13 | - | - | - | - |
| 14 | - | - | - | - |
| 15 | - | - | - | - |

## 测试结论

- **测试结果**: 
- **通过/失败原因**: 
- **建议改进**: 

## 参考文档

- [00_测试规划.md](../00_测试规划.md)
- [成就系统设计文档](../../05_服务端需求文档/成就系统.md)