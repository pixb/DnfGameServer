# 组队系统测试用例文档

## 1. 测试目标

- 验证组队系统的各项功能是否正常工作
- 确保系统在各种场景下的稳定性和可靠性
- 检测系统性能和并发处理能力
- 验证系统与其他模块的集成是否正常

## 2. 测试环境

| 环境 | 配置 | 说明 |
| :--- | :--- | :--- |
| 操作系统 | Linux Ubuntu 20.04 | 服务器操作系统 |
| 数据库 | MySQL 8.0 | 存储队伍数据 |
| 缓存 | Redis 7.0 | 缓存热点数据 |
| 消息队列 | Kafka 3.0 | 处理异步消息 |
| Web服务器 | Gin 1.9.0 | 提供HTTP接口 |
| 客户端 | 游戏客户端 | 模拟玩家操作 |
| 网络 | 局域网 | 测试环境网络 |

## 3. 测试用例

### 3.1 队伍创建测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_001 | 正常创建队伍 | playerId: 123<br>name: "测试队伍" | 队伍创建成功，返回队伍ID、名称、队长信息 | - | 待测试 |
| TC_PARTY_002 | 空队伍名称 | playerId: 123<br>name: "" | 系统提示队伍名称不能为空 | - | 待测试 |
| TC_PARTY_003 | 超长队伍名称 | playerId: 123<br>name: "这是一个超长的队伍名称，超过了系统限制的长度" | 系统提示队伍名称过长 | - | 待测试 |
| TC_PARTY_004 | 玩家已有队伍 | playerId: 123（已在队伍中）<br>name: "测试队伍" | 系统提示玩家已有队伍 | - | 待测试 |
| TC_PARTY_005 | 非法字符名称 | playerId: 123<br>name: "测试队伍@#$" | 系统提示队伍名称包含非法字符 | - | 待测试 |

### 3.2 邀请加入队伍测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_006 | 正常邀请玩家 | partyId: 1<br>playerId: 456 | 邀请发送成功，被邀请玩家收到通知 | - | 待测试 |
| TC_PARTY_007 | 队伍已满 | partyId: 1（已满员）<br>playerId: 456 | 系统提示队伍已满 | - | 待测试 |
| TC_PARTY_008 | 邀请不存在玩家 | partyId: 1<br>playerId: 999999 | 系统提示玩家不存在 | - | 待测试 |
| TC_PARTY_009 | 邀请已有队伍玩家 | partyId: 1<br>playerId: 456（已在队伍中） | 系统提示玩家已有队伍 | - | 待测试 |
| TC_PARTY_010 | 非队长邀请 | partyId: 1<br>playerId: 456<br>inviterId: 789（非队长） | 系统提示无权限邀请 | - | 待测试 |

### 3.3 接受邀请测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_011 | 正常接受邀请 | invitationId: 1<br>playerId: 456 | 接受邀请成功，加入队伍 | - | 待测试 |
| TC_PARTY_012 | 接受过期邀请 | invitationId: 1（已过期）<br>playerId: 456 | 系统提示邀请已过期 | - | 待测试 |
| TC_PARTY_013 | 接受不存在邀请 | invitationId: 999999<br>playerId: 456 | 系统提示邀请不存在 | - | 待测试 |
| TC_PARTY_014 | 玩家已有队伍 | invitationId: 1<br>playerId: 456（已在队伍中） | 系统提示玩家已有队伍 | - | 待测试 |
| TC_PARTY_015 | 队伍已满 | invitationId: 1（队伍已满）<br>playerId: 456 | 系统提示队伍已满 | - | 待测试 |

### 3.4 离开队伍测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_016 | 非队长离开队伍 | partyId: 1<br>playerId: 456（非队长） | 离开队伍成功，队伍其他成员收到通知 | - | 待测试 |
| TC_PARTY_017 | 队长离开队伍（成员>1） | partyId: 1<br>playerId: 123（队长，队伍成员>1） | 队长转让成功，原队长离开队伍 | - | 待测试 |
| TC_PARTY_018 | 队长离开队伍（成员=1） | partyId: 1<br>playerId: 123（队长，队伍成员=1） | 队伍解散成功 | - | 待测试 |
| TC_PARTY_019 | 不在队伍中 | partyId: 1<br>playerId: 999（不在队伍中） | 系统提示玩家不在队伍中 | - | 待测试 |
| TC_PARTY_020 | 离开副本中队伍 | partyId: 1（在副本中）<br>playerId: 456 | 离开队伍成功，返回城镇 | - | 待测试 |

### 3.5 踢出成员测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_021 | 队长踢出成员 | partyId: 1<br>leaderId: 123<br>playerId: 456 | 踢出成员成功，被踢出玩家收到通知 | - | 待测试 |
| TC_PARTY_022 | 非队长踢出成员 | partyId: 1<br>leaderId: 456（非队长）<br>playerId: 789 | 系统提示无权限踢出成员 | - | 待测试 |
| TC_PARTY_023 | 踢出不存在成员 | partyId: 1<br>leaderId: 123<br>playerId: 999（不在队伍中） | 系统提示玩家不在队伍中 | - | 待测试 |
| TC_PARTY_024 | 踢出队长自己 | partyId: 1<br>leaderId: 123<br>playerId: 123 | 系统提示不能踢出队长自己 | - | 待测试 |
| TC_PARTY_025 | 踢出副本中成员 | partyId: 1（在副本中）<br>leaderId: 123<br>playerId: 456 | 踢出成员成功，被踢出玩家返回城镇 | - | 待测试 |

### 3.6 转让队长测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_026 | 正常转让队长 | partyId: 1<br>currentLeaderId: 123<br>newLeaderId: 456 | 队长转让成功，队伍其他成员收到通知 | - | 待测试 |
| TC_PARTY_027 | 非队长转让 | partyId: 1<br>currentLeaderId: 456（非队长）<br>newLeaderId: 789 | 系统提示无权限转让队长 | - | 待测试 |
| TC_PARTY_028 | 转让给不存在玩家 | partyId: 1<br>currentLeaderId: 123<br>newLeaderId: 999（不在队伍中） | 系统提示玩家不在队伍中 | - | 待测试 |
| TC_PARTY_029 | 转让给队长自己 | partyId: 1<br>currentLeaderId: 123<br>newLeaderId: 123 | 系统提示无需转让给队长自己 | - | 待测试 |

### 3.7 组队进入副本测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_030 | 正常进入副本 | partyId: 1<br>dungeonId: 101 | 进入副本成功，返回副本实例ID | - | 待测试 |
| TC_PARTY_031 | 成员等级不足 | partyId: 1（有成员等级不足）<br>dungeonId: 101 | 系统提示部分成员等级不足 | - | 待测试 |
| TC_PARTY_032 | 成员入场次数不足 | partyId: 1（有成员入场次数不足）<br>dungeonId: 101 | 系统提示部分成员入场次数不足 | - | 待测试 |
| TC_PARTY_033 | 成员不在线 | partyId: 1（有成员离线）<br>dungeonId: 101 | 系统提示部分成员不在线 | - | 待测试 |
| TC_PARTY_034 | 不存在副本 | partyId: 1<br>dungeonId: 999999 | 系统提示副本不存在 | - | 待测试 |

### 3.8 队伍聊天测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_035 | 正常发送消息 | partyId: 1<br>playerId: 123<br>message: "大家好" | 消息发送成功，队伍其他成员收到消息 | - | 待测试 |
| TC_PARTY_036 | 空消息内容 | partyId: 1<br>playerId: 123<br>message: "" | 系统提示消息内容不能为空 | - | 待测试 |
| TC_PARTY_037 | 超长消息内容 | partyId: 1<br>playerId: 123<br>message: "这是一条超长的消息内容，超过了系统限制的长度，测试系统是否能正确处理" | 系统提示消息内容过长 | - | 待测试 |
| TC_PARTY_038 | 不在队伍中发送消息 | partyId: 1<br>playerId: 999（不在队伍中）<br>message: "大家好" | 系统提示玩家不在队伍中 | - | 待测试 |
| TC_PARTY_039 | 敏感词消息 | partyId: 1<br>playerId: 123<br>message: "敏感词测试" | 系统过滤敏感词或提示消息包含敏感词 | - | 待测试 |

### 3.9 队伍匹配测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_040 | 正常匹配队伍 | playerId: 789<br>minLevel: 40<br>maxLevel: 60<br>dungeonId: 101 | 匹配成功，返回匹配到的队伍 | - | 待测试 |
| TC_PARTY_041 | 无匹配结果 | playerId: 789<br>minLevel: 80<br>maxLevel: 90<br>dungeonId: 999 | 系统提示未找到匹配队伍 | - | 待测试 |
| TC_PARTY_042 | 取消匹配 | playerId: 789（匹配中） | 取消匹配成功，从匹配池中移除 | - | 待测试 |
| TC_PARTY_043 | 匹配超时 | playerId: 789（长时间无匹配） | 系统提示匹配超时 | - | 待测试 |

### 3.10 队伍解散测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PARTY_044 | 队长解散队伍 | partyId: 1<br>leaderId: 123 | 队伍解散成功，所有成员收到通知 | - | 待测试 |
| TC_PARTY_045 | 非队长解散队伍 | partyId: 1<br>leaderId: 456（非队长） | 系统提示无权限解散队伍 | - | 待测试 |
| TC_PARTY_046 | 不存在队伍 | partyId: 999999<br>leaderId: 123 | 系统提示队伍不存在 | - | 待测试 |

## 4. 性能测试

### 4.1 并发测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PERF_001 | 同时创建队伍 | 100个并发请求 | 所有请求成功，响应时间<500ms | - | 待测试 |
| TC_PERF_002 | 同时邀请玩家 | 100个并发请求 | 所有请求成功，响应时间<500ms | - | 待测试 |
| TC_PERF_003 | 同时发送消息 | 100个并发请求 | 所有请求成功，响应时间<500ms | - | 待测试 |
| TC_PERF_004 | 同时进入副本 | 100个并发请求 | 所有请求成功，响应时间<1s | - | 待测试 |

### 4.2 负载测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PERF_005 | 1000个队伍 | 系统中存在1000个队伍 | 系统正常运行，响应时间<1s | - | 待测试 |
| TC_PERF_006 | 10000条聊天消息 | 系统中存在10000条聊天消息 | 聊天历史查询响应时间<500ms | - | 待测试 |
| TC_PERF_007 | 100个同时匹配 | 100个玩家同时进行匹配 | 匹配完成时间<30s | - | 待测试 |

### 4.3 稳定性测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_PERF_008 | 72小时持续运行 | 系统持续运行72小时 | 系统稳定运行，无崩溃 | - | 待测试 |
| TC_PERF_009 | 重复创建/解散队伍 | 1000次重复创建/解散队伍 | 系统正常运行，无内存泄漏 | - | 待测试 |
| TC_PERF_010 | 网络波动 | 模拟网络波动场景 | 系统能够处理网络波动，数据一致 | - | 待测试 |

## 5. 集成测试

### 5.1 与角色系统集成

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_INTEG_001 | 获取玩家角色信息 | playerId: 123 | 成功获取玩家角色信息（等级、职业等） | - | 待测试 |
| TC_INTEG_002 | 角色等级验证 | playerId: 123（等级不足）<br>dungeonId: 101（等级要求高） | 系统提示角色等级不足 | - | 待测试 |

### 5.2 与副本系统集成

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_INTEG_003 | 副本入场次数验证 | playerId: 123（入场次数为0）<br>dungeonId: 101 | 系统提示入场次数不足 | - | 待测试 |
| TC_INTEG_004 | 副本进度同步 | partyId: 1<br>dungeonId: 101 | 副本进度在队伍成员间同步 | - | 待测试 |

### 5.3 与聊天系统集成

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_INTEG_005 | 队伍聊天消息广播 | partyId: 1<br>playerId: 123<br>message: "测试消息" | 所有队伍成员收到消息 | - | 待测试 |
| TC_INTEG_006 | 聊天历史记录 | partyId: 1<br>limit: 20 | 成功获取聊天历史记录 | - | 待测试 |

### 5.4 与物品系统集成

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_INTEG_007 | 副本掉落分配 | partyId: 1<br>dungeonId: 101（已完成） | 掉落物品正确分配给队伍成员 | - | 待测试 |
| TC_INTEG_008 | 物品拾取同步 | partyId: 1<br>itemId: 1001 | 队伍成员间物品拾取状态同步 | - | 待测试 |

## 6. 安全测试

### 6.1 权限测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_SEC_001 | 非队长执行队长操作 | partyId: 1<br>leaderId: 456（非队长） | 系统拒绝操作，提示权限不足 | - | 待测试 |
| TC_SEC_002 | 伪造队长ID | partyId: 1<br>leaderId: 123（伪造） | 系统拒绝操作，提示权限验证失败 | - | 待测试 |

### 6.2 输入验证测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_SEC_003 | SQL注入攻击 | partyId: "1' OR '1'='1" | 系统拒绝请求，提示输入非法 | - | 待测试 |
| TC_SEC_004 | XSS攻击 | message: "<script>alert('XSS')</script>" | 系统过滤恶意脚本或拒绝请求 | - | 待测试 |

### 6.3 数据一致性测试

| 测试用例ID | 测试场景 | 输入数据 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC_SEC_005 | 并发修改队伍 | 2个并发请求修改同一队伍 | 数据最终一致，无冲突 | - | 待测试 |
| TC_SEC_006 | 网络中断恢复 | 操作过程中网络中断后恢复 | 系统能够恢复，数据一致 | - | 待测试 |

## 4. 测试结果分析

### 4.1 测试通过率

| 测试类型 | 测试用例数 | 通过数 | 失败数 | 通过率 |
| :--- | :--- | :--- | :--- | :--- |
| 功能测试 | 46 | 0 | 0 | 0% |
| 性能测试 | 10 | 0 | 0 | 0% |
| 集成测试 | 8 | 0 | 0 | 0% |
| 安全测试 | 6 | 0 | 0 | 0% |
| 总计 | 70 | 0 | 0 | 0% |

### 4.2 问题汇总

| 问题ID | 问题描述 | 严重程度 | 状态 | 修复方案 |
| :--- | :--- | :--- | :--- | :--- |
| - | - | - | - | - |

### 4.3 改进建议

1. **性能优化**:
   - 增加队伍缓存，减少数据库查询
   - 优化匹配算法，提高匹配速度

2. **功能完善**:
   - 增加队伍成就系统
   - 优化队伍聊天体验

3. **安全加强**:
   - 增加更严格的输入验证
   - 完善权限控制机制

4. **稳定性提升**:
   - 增加系统监控
   - 完善异常处理机制

## 5. 测试结论

- **测试完成情况**:
  - 共设计70个测试用例，涵盖功能、性能、集成、安全等方面
  - 所有测试用例均已准备就绪，待执行测试

- **系统评估**:
  - 系统设计合理，功能完善
  - 架构清晰，易于维护
  - 安全性和可靠性有待实际测试验证

- **建议**:
  - 按照测试计划执行所有测试用例
  - 根据测试结果进行必要的优化和修复
  - 建立持续测试机制，确保系统稳定性