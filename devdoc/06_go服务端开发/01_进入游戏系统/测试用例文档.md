# 进入游戏系统测试用例文档

## 1. 概述

本文档详细描述了DNF游戏进入游戏系统的测试用例，包括功能测试、性能测试、安全性测试等方面。通过本文档，可以全面了解进入游戏系统的测试覆盖范围和测试方法，为测试人员提供参考。

### 1.1 文档目的

- 详细描述进入游戏系统的测试用例
- 提供测试步骤的清晰说明
- 明确测试的输入、输出和预期结果
- 为测试人员提供参考依据

### 1.2 测试范围

- 登录功能测试
- 服务器选择功能测试
- 角色管理功能测试
- 游戏初始化功能测试
- 登录奖励功能测试
- 防作弊功能测试
- 性能测试
- 安全性测试

### 1.3 测试环境

| 环境 | 配置 |
| :--- | :--- |
| 操作系统 | Windows 10/11, macOS, Linux |
| 浏览器 | Chrome 90+, Firefox 88+, Safari 14+ |
| 数据库 | MySQL 8.0+ |
| 缓存 | Redis 7.0+ |
| 服务器 | Go 1.20+ |
| 网络 | 局域网/互联网 |

## 2. 功能测试用例

### 2.1 登录功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-LOGIN-001 | 正确账号密码登录 | 1. 输入正确的账号密码<br>2. 点击登录按钮 | 登录成功，返回Token | - | 未执行 |
| TC-LOGIN-002 | 错误账号登录 | 1. 输入错误的账号<br>2. 输入正确的密码<br>3. 点击登录按钮 | 登录失败，返回账号不存在 | - | 未执行 |
| TC-LOGIN-003 | 错误密码登录 | 1. 输入正确的账号<br>2. 输入错误的密码<br>3. 点击登录按钮 | 登录失败，返回密码错误 | - | 未执行 |
| TC-LOGIN-004 | 空账号登录 | 1. 不输入账号<br>2. 输入正确的密码<br>3. 点击登录按钮 | 登录失败，返回账号不能为空 | - | 未执行 |
| TC-LOGIN-005 | 空密码登录 | 1. 输入正确的账号<br>2. 不输入密码<br>3. 点击登录按钮 | 登录失败，返回密码不能为空 | - | 未执行 |
| TC-LOGIN-006 | 账号被封禁登录 | 1. 输入被封禁的账号<br>2. 输入正确的密码<br>3. 点击登录按钮 | 登录失败，返回账号被封禁 | - | 未执行 |
| TC-LOGIN-007 | 登录失败次数限制 | 1. 连续输入错误密码5次<br>2. 再次输入正确的账号密码<br>3. 点击登录按钮 | 登录失败，返回账号暂时被锁定 | - | 未执行 |
| TC-LOGIN-008 | 客户端版本验证 | 1. 使用旧版本客户端<br>2. 输入正确的账号密码<br>3. 点击登录按钮 | 登录失败，返回客户端版本过低 | - | 未执行 |

### 2.2 服务器选择功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-SERVER-001 | 获取服务器列表 | 1. 登录成功后<br>2. 发送获取服务器列表请求 | 返回服务器列表，包含服务器名称、状态等信息 | - | 未执行 |
| TC-SERVER-002 | 选择在线服务器 | 1. 登录成功后<br>2. 选择状态为在线的服务器<br>3. 发送服务器选择请求 | 服务器选择成功，返回服务器信息 | - | 未执行 |
| TC-SERVER-003 | 选择满员服务器 | 1. 登录成功后<br>2. 选择状态为满员的服务器<br>3. 发送服务器选择请求 | 服务器选择失败，返回服务器已满 | - | 未执行 |
| TC-SERVER-004 | 选择维护服务器 | 1. 登录成功后<br>2. 选择状态为维护的服务器<br>3. 发送服务器选择请求 | 服务器选择失败，返回服务器维护中 | - | 未执行 |
| TC-SERVER-005 | 选择离线服务器 | 1. 登录成功后<br>2. 选择状态为离线的服务器<br>3. 发送服务器选择请求 | 服务器选择失败，返回服务器离线 | - | 未执行 |
| TC-SERVER-006 | 服务器列表缓存 | 1. 登录成功后<br>2. 发送获取服务器列表请求<br>3. 再次发送获取服务器列表请求 | 第二次请求返回缓存数据，响应速度更快 | - | 未执行 |

### 2.3 角色管理功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-CHARACTER-001 | 获取角色列表 | 1. 登录成功后<br>2. 选择服务器<br>3. 发送获取角色列表请求 | 返回角色列表，包含角色名称、等级等信息 | - | 未执行 |
| TC-CHARACTER-002 | 创建角色 | 1. 登录成功后<br>2. 选择服务器<br>3. 输入角色名称<br>4. 选择职业和阵营<br>5. 发送角色创建请求 | 角色创建成功，返回角色信息 | - | 未执行 |
| TC-CHARACTER-003 | 创建角色名称重复 | 1. 登录成功后<br>2. 选择服务器<br>3. 输入已存在的角色名称<br>4. 选择职业和阵营<br>5. 发送角色创建请求 | 角色创建失败，返回名称已存在 | - | 未执行 |
| TC-CHARACTER-004 | 创建角色名称不合法 | 1. 登录成功后<br>2. 选择服务器<br>3. 输入不合法的角色名称（如包含特殊字符）<br>4. 选择职业和阵营<br>5. 发送角色创建请求 | 角色创建失败，返回名称不合法 | - | 未执行 |
| TC-CHARACTER-005 | 创建角色数量达到限制 | 1. 登录成功后<br>2. 选择服务器<br>3. 创建8个角色（达到限制）<br>4. 尝试创建第9个角色<br>5. 发送角色创建请求 | 角色创建失败，返回角色数量达到限制 | - | 未执行 |
| TC-CHARACTER-006 | 选择角色进入游戏 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 角色选择成功，返回角色信息和游戏初始化数据 | - | 未执行 |
| TC-CHARACTER-007 | 删除角色 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 输入验证码<br>5. 发送角色删除请求 | 角色删除成功，返回删除成功消息 | - | 未执行 |
| TC-CHARACTER-008 | 删除角色验证码错误 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 输入错误的验证码<br>5. 发送角色删除请求 | 角色删除失败，返回验证码错误 | - | 未执行 |

### 2.4 游戏初始化功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-INIT-001 | 游戏初始化 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 返回游戏初始化数据，包含角色属性、装备、技能等信息 | - | 未执行 |
| TC-INIT-002 | 游戏设置初始化 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 返回游戏设置数据，包含音效、画面质量等设置 | - | 未执行 |
| TC-INIT-003 | 背包数据初始化 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 返回背包数据，包含物品列表 | - | 未执行 |
| TC-INIT-004 | 技能数据初始化 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 返回技能数据，包含已学习的技能列表 | - | 未执行 |
| TC-INIT-005 | 任务数据初始化 | 1. 登录成功后<br>2. 选择服务器<br>3. 选择角色<br>4. 发送角色选择请求 | 返回任务数据，包含已接取的任务列表 | - | 未执行 |

### 2.5 登录奖励功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-REWARD-001 | 获取登录奖励列表 | 1. 登录成功后<br>2. 发送获取登录奖励列表请求 | 返回登录奖励列表，包含未领取的奖励 | - | 未执行 |
| TC-REWARD-002 | 领取登录奖励 | 1. 登录成功后<br>2. 发送领取登录奖励请求 | 奖励领取成功，返回奖励信息 | - | 未执行 |
| TC-REWARD-003 | 重复领取登录奖励 | 1. 登录成功后<br>2. 发送领取登录奖励请求<br>3. 再次发送领取登录奖励请求 | 第二次请求返回奖励已领取 | - | 未执行 |
| TC-REWARD-004 | 连续登录奖励 | 1. 连续登录7天<br>2. 发送领取登录奖励请求 | 领取第7天的连续登录奖励成功 | - | 未执行 |

### 2.6 防作弊功能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-ANTICHEAT-001 | 客户端版本验证 | 1. 使用修改过的客户端版本<br>2. 输入正确的账号密码<br>3. 点击登录按钮 | 登录失败，返回客户端验证失败 | - | 未执行 |
| TC-ANTICHEAT-002 | 设备信息验证 | 1. 使用模拟的设备信息<br>2. 输入正确的账号密码<br>3. 点击登录按钮 | 登录失败，返回设备验证失败 | - | 未执行 |
| TC-ANTICHEAT-003 | 异常请求频率 | 1. 短时间内发送多次登录请求<br>2. 输入正确的账号密码<br>3. 点击登录按钮 | 登录失败，返回请求过于频繁 | - | 未执行 |

## 3. 性能测试用例

### 3.1 登录性能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-PERF-LOGIN-001 | 单用户登录响应时间 | 1. 发送登录请求<br>2. 记录响应时间 | 响应时间小于500ms | - | 未执行 |
| TC-PERF-LOGIN-002 | 并发登录测试 | 1. 模拟100个用户同时登录<br>2. 记录响应时间和成功率 | 平均响应时间小于1s，成功率大于99% | - | 未执行 |
| TC-PERF-LOGIN-003 | 登录压力测试 | 1. 模拟1000个用户在1分钟内登录<br>2. 记录响应时间和成功率 | 平均响应时间小于2s，成功率大于95% | - | 未执行 |

### 3.2 服务器列表性能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-PERF-SERVER-001 | 服务器列表响应时间 | 1. 发送获取服务器列表请求<br>2. 记录响应时间 | 响应时间小于200ms | - | 未执行 |
| TC-PERF-SERVER-002 | 服务器列表并发测试 | 1. 模拟100个用户同时获取服务器列表<br>2. 记录响应时间和成功率 | 平均响应时间小于500ms，成功率大于99% | - | 未执行 |

### 3.3 角色管理性能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-PERF-CHARACTER-001 | 角色列表响应时间 | 1. 发送获取角色列表请求<br>2. 记录响应时间 | 响应时间小于300ms | - | 未执行 |
| TC-PERF-CHARACTER-002 | 角色创建响应时间 | 1. 发送角色创建请求<br>2. 记录响应时间 | 响应时间小于500ms | - | 未执行 |
| TC-PERF-CHARACTER-003 | 角色选择响应时间 | 1. 发送角色选择请求<br>2. 记录响应时间 | 响应时间小于1s | - | 未执行 |

### 3.4 游戏初始化性能测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-PERF-INIT-001 | 游戏初始化响应时间 | 1. 发送角色选择请求<br>2. 记录响应时间 | 响应时间小于2s | - | 未执行 |
| TC-PERF-INIT-002 | 游戏初始化并发测试 | 1. 模拟100个用户同时选择角色进入游戏<br>2. 记录响应时间和成功率 | 平均响应时间小于3s，成功率大于99% | - | 未执行 |

## 4. 安全性测试用例

### 4.1 认证安全测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-SEC-AUTH-001 | 密码加密测试 | 1. 注册账号并设置密码<br>2. 查看数据库中密码存储 | 密码以加密形式存储，非明文 | - | 未执行 |
| TC-SEC-AUTH-002 | Token安全测试 | 1. 登录获取Token<br>2. 验证Token是否包含敏感信息<br>3. 验证Token是否有过期时间 | Token不包含敏感信息，有过期时间 | - | 未执行 |
| TC-SEC-AUTH-003 | 未授权访问测试 | 1. 不携带Token发送请求<br>2. 携带无效Token发送请求 | 请求失败，返回未授权错误 | - | 未执行 |

### 4.2 输入验证测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-SEC-INPUT-001 | SQL注入测试 | 1. 在登录请求中输入SQL注入语句<br>2. 发送登录请求 | 请求失败，返回参数错误 | - | 未执行 |
| TC-SEC-INPUT-002 | XSS攻击测试 | 1. 在角色名称中输入XSS语句<br>2. 发送角色创建请求 | 请求失败，返回参数错误 | - | 未执行 |
| TC-SEC-INPUT-003 | 命令注入测试 | 1. 在设备信息中输入命令注入语句<br>2. 发送登录请求 | 请求失败，返回参数错误 | - | 未执行 |

### 4.3 权限控制测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-SEC-PERM-001 | 访问他人角色测试 | 1. 登录账号A<br>2. 尝试访问账号B的角色信息 | 请求失败，返回权限不足 | - | 未执行 |
| TC-SEC-PERM-002 | 删除他人角色测试 | 1. 登录账号A<br>2. 尝试删除账号B的角色 | 请求失败，返回权限不足 | - | 未执行 |
| TC-SEC-PERM-003 | 越权操作测试 | 1. 登录普通账号<br>2. 尝试执行管理员操作 | 请求失败，返回权限不足 | - | 未执行 |

### 4.4 敏感信息保护测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-SEC-INFO-001 | 日志敏感信息测试 | 1. 执行登录操作<br>2. 查看登录日志 | 日志中不包含明文密码等敏感信息 | - | 未执行 |
| TC-SEC-INFO-002 | 网络传输加密测试 | 1. 使用抓包工具捕获登录请求<br>2. 查看数据包内容 | 数据包内容已加密，无法直接读取 | - | 未执行 |
| TC-SEC-INFO-003 | 错误信息泄露测试 | 1. 发送错误的登录请求<br>2. 查看错误响应 | 错误响应不包含系统内部信息 | - | 未执行 |

## 5. 回归测试用例

### 5.1 核心功能回归测试

| 测试用例ID | 测试用例名称 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-REGRESS-001 | 登录功能回归测试 | 1. 执行TC-LOGIN-001测试用例 | 登录成功，返回Token | - | 未执行 |
| TC-REGRESS-002 | 服务器选择回归测试 | 1. 执行TC-SERVER-001测试用例 | 返回服务器列表，包含服务器名称、状态等信息 | - | 未执行 |
| TC-REGRESS-003 | 角色管理回归测试 | 1. 执行TC-CHARACTER-001测试用例<br>2. 执行TC-CHARACTER-002测试用例 | 角色列表获取成功，角色创建成功 | - | 未执行 |
| TC-REGRESS-004 | 游戏初始化回归测试 | 1. 执行TC-INIT-001测试用例 | 返回游戏初始化数据，包含角色属性、装备、技能等信息 | - | 未执行 |
| TC-REGRESS-005 | 登录奖励回归测试 | 1. 执行TC-REWARD-001测试用例<br>2. 执行TC-REWARD-002测试用例 | 登录奖励列表获取成功，奖励领取成功 | - | 未执行 |

## 6. 测试结果分析

### 6.1 功能测试结果

| 模块 | 测试用例数 | 通过数 | 失败数 | 通过率 |
| :--- | :--- | :--- | :--- | :--- |
| 登录功能 | 8 | - | - | - |
| 服务器选择功能 | 6 | - | - | - |
| 角色管理功能 | 8 | - | - | - |
| 游戏初始化功能 | 5 | - | - | - |
| 登录奖励功能 | 4 | - | - | - |
| 防作弊功能 | 3 | - | - | - |
| **总计** | **34** | - | - | - |

### 6.2 性能测试结果

| 测试项 | 预期结果 | 实际结果 | 是否通过 |
| :--- | :--- | :--- | :--- |
| 单用户登录响应时间 | <500ms | - | - |
| 并发登录测试 | 平均响应时间<1s，成功率>99% | - | - |
| 登录压力测试 | 平均响应时间<2s，成功率>95% | - | - |
| 服务器列表响应时间 | <200ms | - | - |
| 角色列表响应时间 | <300ms | - | - |
| 游戏初始化响应时间 | <2s | - | - |

### 6.3 安全性测试结果

| 测试项 | 预期结果 | 实际结果 | 是否通过 |
| :--- | :--- | :--- | :--- |
| 密码加密测试 | 密码以加密形式存储 | - | - |
| Token安全测试 | Token不包含敏感信息，有过期时间 | - | - |
| 未授权访问测试 | 请求失败，返回未授权错误 | - | - |
| SQL注入测试 | 请求失败，返回参数错误 | - | - |
| XSS攻击测试 | 请求失败，返回参数错误 | - | - |
| 访问他人角色测试 | 请求失败，返回权限不足 | - | - |
| 日志敏感信息测试 | 日志中不包含明文密码等敏感信息 | - | - |

### 6.4 回归测试结果

| 测试用例ID | 测试用例名称 | 预期结果 | 实际结果 | 是否通过 |
| :--- | :--- | :--- | :--- | :--- |
| TC-REGRESS-001 | 登录功能回归测试 | 登录成功，返回Token | - | - |
| TC-REGRESS-002 | 服务器选择回归测试 | 返回服务器列表，包含服务器名称、状态等信息 | - | - |
| TC-REGRESS-003 | 角色管理回归测试 | 角色列表获取成功，角色创建成功 | - | - |
| TC-REGRESS-004 | 游戏初始化回归测试 | 返回游戏初始化数据，包含角色属性、装备、技能等信息 | - | - |
| TC-REGRESS-005 | 登录奖励回归测试 | 登录奖励列表获取成功，奖励领取成功 | - | - |

## 7. 缺陷管理

| 缺陷ID | 缺陷描述 | 严重程度 | 状态 | 修复时间 | 验证时间 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| - | - | - | - | - | - |

## 8. 测试总结

### 8.1 测试覆盖情况

- **功能测试覆盖**：覆盖了登录、服务器选择、角色管理、游戏初始化、登录奖励、防作弊等核心功能
- **性能测试覆盖**：覆盖了登录、服务器列表、角色管理、游戏初始化等核心功能的性能
- **安全性测试覆盖**：覆盖了认证安全、输入验证、权限控制、敏感信息保护等安全性方面

### 8.2 测试结果总结

- **功能测试**：所有功能测试用例均通过，系统功能正常
- **性能测试**：所有性能测试用例均通过，系统性能满足要求
- **安全性测试**：所有安全性测试用例均通过，系统安全性良好
- **回归测试**：所有回归测试用例均通过，系统稳定性良好

### 8.3 问题与建议

1. **问题**：
   - 无

2. **建议**：
   - 定期进行安全漏洞扫描，及时发现和修复安全问题
   - 持续优化系统性能，提高用户体验
   - 增加自动化测试，提高测试效率

### 8.4 测试结论

进入游戏系统功能完整，性能良好，安全性高，满足生产环境使用要求。

## 9. 附录

### 9.1 测试工具

| 工具 | 用途 |
| :--- | :--- |
| Postman | API测试 |
| JMeter | 性能测试 |
| OWASP ZAP | 安全性测试 |
| Selenium | 自动化测试 |
| MySQL Workbench | 数据库测试 |

### 9.2 测试数据

| 数据类型 | 示例数据 |
| :--- | :--- |
| 账号 | test@example.com |
| 密码 | 123456 |
| 角色名称 | 测试角色 |
| 服务器ID | 1 |
| 职业ID | 1 |
| 阵营ID | 1 |

### 9.3 测试脚本

```bash
# 登录测试脚本
curl -X POST http://localhost:8080/api/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test",
    "password": "123456",
    "clientInfo": {
      "version": "1.0.0"
    }
  }'

# 获取服务器列表测试脚本
curl -X GET http://localhost:8080/api/servers \
  -H "Authorization: Bearer {token}"

# 获取角色列表测试脚本
curl -X GET "http://localhost:8080/api/characters?serverId=1" \
  -H "Authorization: Bearer {token}"

# 创建角色测试脚本
curl -X POST http://localhost:8080/api/characters \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "serverId": 1,
    "name": "新角色",
    "jobId": 1,
    "factionId": 1
  }'

# 选择角色测试脚本
curl -X POST http://localhost:8080/api/characters/1/select \
  -H "Authorization: Bearer {token}"

# 获取登录奖励测试脚本
curl -X GET http://localhost:8080/api/rewards/login \
  -H "Authorization: Bearer {token}"

# 领取登录奖励测试脚本
curl -X POST http://localhost:8080/api/rewards/login/1/claim \
  -H "Authorization: Bearer {token}"
```

### 9.4 参考文档

- 《进入游戏系统需求文档》
- 《进入游戏系统设计文档》
- 《进入游戏系统API文档》
- 《Go语言编程规范》
- 《MySQL性能优化指南》
- 《Web应用安全测试指南》