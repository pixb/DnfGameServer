# 制作系统 - 监控与维护

## 1. 监控指标

| 指标名称 | 类型 | 说明 | 监控方式 |
| :--- | :--- | :--- | :--- |
| 制作次数 | `Counter` | 物品制作的总次数 | Prometheus |
| 制作成功率 | `Gauge` | 制作成功次数 / 总制作次数 | Prometheus |
| 技能升级次数 | `Counter` | 技能升级的总次数 | Prometheus |
| 材料消耗数量 | `Counter` | 制作消耗的材料总数量 | Prometheus |
| 物品产出数量 | `Counter` | 制作产出的物品总数量 | Prometheus |
| 错误率 | `Counter` | 错误次数 / 总请求次数 | Prometheus |
| 响应时间 | `Histogram` | API 响应时间分布 | Prometheus |

## 2. 日志管理

| 日志级别 | 说明 | 存储位置 |
| :--- | :--- | :--- |
| `debug` | 调试信息 | `logs/debug.log` |
| `info` | 普通信息 | `logs/info.log` |
| `warn` | 警告信息 | `logs/warn.log` |
| `error` | 错误信息 | `logs/error.log` |

## 3. 常见问题

| 问题 | 原因 | 解决方案 |
| :--- | :--- | :--- |
| 制作失败 | 材料不足或技能等级不够 | 验证材料数量和技能等级 |
| 配方查询缓慢 | 数据量过大或索引缺失 | 优化数据库索引和查询 |
| 技能升级异常 | 经验计算错误 | 检查经验计算逻辑 |
| 批量制作超时 | 制作数量过多 | 限制单次批量制作数量 |
| 材料消耗不一致 | 并发操作导致 | 确保材料消耗的原子性 |