# 6. 业务流程文档

## 6.1 核心业务流程

### 6.1.1 商品浏览流程
1. 玩家打开商城界面
2. 系统加载商品分类
3. 玩家选择分类或搜索商品
4. 系统返回商品列表
5. 玩家查看商品详情

### 6.1.2 商品购买流程
1. 玩家选择商品并点击购买
2. 系统检查商品状态（是否在售、是否过期）
3. 系统检查购买限制（是否达到购买上限）
4. 系统检查玩家货币（是否足够）
5. 系统扣除玩家货币
6. 系统添加物品到玩家背包
7. 系统记录购买记录
8. 系统更新购买限制
9. 系统返回购买结果

### 6.1.3 商品推荐流程
1. 玩家打开商城推荐页面
2. 系统根据推荐类型获取推荐商品
3. 系统返回推荐商品列表
4. 玩家浏览推荐商品

## 6.2 状态转换

### 6.2.1 商品状态转换
- **待上架** → **在售**：到开始时间自动转换
- **在售** → **下架**：到结束时间自动转换，或管理员手动下架
- **在售** → **售罄**：销售数量达到销售配额

### 6.2.2 购买状态转换
- **待支付** → **已支付**：玩家完成支付
- **已支付** → **已完成**：物品发放成功