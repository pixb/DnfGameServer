# 市场系统 - 测试用例文档

## 1. 测试目标

验证市场系统的核心功能，包括市场列表查询、物品上架、物品下架、物品购买、市场搜索和我的上架列表等功能的正确性和稳定性。

## 2. 测试场景

### 2.1 市场列表查询测试

| 测试场景 | 测试步骤 | 预期结果 | 测试数据 |
| :--- | :--- | :--- | :--- |
| 正常查询 | 1. 发送市场列表查询请求<br>2. 接收查询响应 | 成功返回市场物品列表 | `{"page": 1, "page_size": 20, "item_type": 1}` |
| 分页查询 | 1. 发送分页查询请求<br>2. 接收查询响应 | 成功返回指定页的数据 | `{"page": 2, "page_size": 20}` |
| 筛选查询 | 1. 发送带筛选条件的查询请求<br>2. 接收查询响应 | 成功返回符合条件的物品 | `{"page": 1, "page_size": 20, "min_level": 50, "max_level": 100}` |

### 2.2 物品上架测试

| 测试场景 | 测试步骤 | 预期结果 | 测试数据 |
| :--- | :--- | :--- | :--- |
| 正常上架 | 1. 发送物品上架请求<br>2. 接收上架响应 | 成功上架，返回市场物品ID | `{"item_guid": 123456, "item_count": 1, "price": 10000, "currency_type": 1}` |
| 物品不存在 | 1. 发送不存在物品的上架请求<br>2. 接收上架响应 | 上架失败，返回错误信息 | `{"item_guid": 999999, "item_count": 1, "price": 10000, "currency_type": 1}` |
| 物品不属于玩家 | 1. 发送他人物品的上架请求<br>2. 接收上架响应 | 上架失败，返回错误信息 | `{"item_guid": 123456, "item_count": 1, "price": 10000, "currency_type": 1}` |
| 数量不足 | 1. 发送数量超过背包数量的上架请求<br>2. 接收上架响应 | 上架失败，返回错误信息 | `{"item_guid": 123456, "item_count": 10, "price": 10000, "currency_type": 1}` |

### 2.3 物品购买测试

| 测试场景 | 测试步骤 | 预期结果 | 测试数据 |
| :--- | :--- | :--- | :--- |
| 正常购买 | 1. 发送物品购买请求<br>2. 接收购买响应 | 成功购买，返回物品信息 | `{"market_id": 789012, "buy_count": 1}` |
| 物品不存在 | 1. 发送不存在物品的购买请求<br>2. 接收购买响应 | 购买失败，返回错误信息 | `{"market_id": 999999, "buy_count": 1}` |
| 数量不足 | 1. 发送购买数量超过上架数量的请求<br>2. 接收购买响应 | 购买失败，返回错误信息 | `{"market_id": 789012, "buy_count": 10}` |
| 货币不足 | 1. 发送货币不足的购买请求<br>2. 接收购买响应 | 购买失败，返回错误信息 | `{"market_id": 789012, "buy_count": 1}` |

## 3. 测试用例

| 测试用例ID | 测试用例名称 | 测试类型 | 优先级 | 关联API |
| :--- | :--- | :--- | :--- | :--- |
| TC001 | 市场列表查询 | 功能测试 | 高 | `/api/v1/market/list` |
| TC002 | 物品上架 | 功能测试 | 高 | `/api/v1/market/add` |
| TC003 | 物品下架 | 功能测试 | 高 | `/api/v1/market/remove` |
| TC004 | 物品购买 | 功能测试 | 高 | `/api/v1/market/buy` |
| TC005 | 市场搜索 | 功能测试 | 高 | `/api/v1/market/search` |
| TC006 | 我的上架列表 | 功能测试 | 高 | `/api/v1/market/my-list` |
| TC007 | 物品上架-物品不存在 | 异常测试 | 中 | `/api/v1/market/add` |
| TC008 | 物品上架-物品不属于玩家 | 异常测试 | 中 | `/api/v1/market/add` |
| TC009 | 物品购买-货币不足 | 异常测试 | 中 | `/api/v1/market/buy` |
| TC010 | 物品购买-数量不足 | 异常测试 | 中 | `/api/v1/market/buy` |