syntax = "proto3";

package dnf.v1;

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "dnf/v1/auth.proto";
import "dnf/v1/role.proto";
import "dnf/v1/item.proto";
import "dnf/v1/dungeon.proto";
import "dnf/v1/chat.proto";
import "dnf/v1/shop.proto";
import "dnf/v1/quest.proto";
import "dnf/v1/guild.proto";
import "dnf/v1/pk.proto";
import "dnf/v1/achievement.proto";
import "dnf/v1/auction.proto";

option go_package = "gen/dnf/v1";

// 游戏服务 - 主要的TCP游戏逻辑服务
service GameService {
  // 角色相关
  rpc GetRoleInfo(GetRoleInfoRequest) returns (GetRoleInfoResponse);
  rpc UpdateAttributes(UpdateAttributesRequest) returns (UpdateAttributesResponse);
  rpc LearnSkill(LearnSkillRequest) returns (LearnSkillResponse);
  rpc UpgradeSkill(UpgradeSkillRequest) returns (UpgradeSkillResponse);
  rpc RecoverFatigue(RecoverFatigueRequest) returns (RecoverFatigueResponse);
  
  // 背包相关
  rpc GetBag(GetBagRequest) returns (GetBagResponse);
  rpc UseItem(UseItemRequest) returns (UseItemResponse);
  rpc MoveItem(MoveItemRequest) returns (MoveItemResponse);
  rpc SellItem(SellItemRequest) returns (SellItemResponse);
  rpc EquipItem(EquipItemRequest) returns (EquipItemResponse);
  
  // 副本相关
  rpc EnterDungeon(EnterDungeonRequest) returns (EnterDungeonResponse);
  rpc ExitDungeon(ExitDungeonRequest) returns (ExitDungeonResponse);
  rpc Revive(ReviveRequest) returns (ReviveResponse);
  rpc ChangeRoom(ChangeRoomRequest) returns (ChangeRoomResponse);
  
  // 聊天相关
  rpc SendChat(SendChatRequest) returns (SendChatResponse);
  rpc GetChatHistory(GetChatHistoryRequest) returns (GetChatHistoryResponse);
  
  // 好友相关
  rpc GetFriendList(GetFriendListRequest) returns (GetFriendListResponse);
  rpc AddFriend(AddFriendRequest) returns (AddFriendResponse);
  rpc ReplyFriendRequest(ReplyFriendRequestMessage) returns (google.protobuf.Empty);
  rpc RemoveFriend(RemoveFriendRequest) returns (RemoveFriendResponse);
  
  // 商店相关
  rpc GetShopList(GetShopListRequest) returns (GetShopListResponse);
  rpc BuyItem(BuyItemRequest) returns (BuyItemResponse);
  rpc SellToShop(SellToShopRequest) returns (SellToShopResponse);
  
  // 拍卖行
  rpc SearchAuction(SearchAuctionRequest) returns (SearchAuctionResponse);
  rpc RegisterAuction(RegisterAuctionRequest) returns (RegisterAuctionResponse);
  rpc BidAuction(BidAuctionRequest) returns (BidAuctionResponse);
  rpc BuyoutAuction(BuyoutAuctionRequest) returns (BuyoutAuctionResponse);
  
  // 个人商店
  rpc OpenPrivateStore(OpenPrivateStoreRequest) returns (OpenPrivateStoreResponse);
  rpc ViewPrivateStore(ViewPrivateStoreRequest) returns (ViewPrivateStoreResponse);
  rpc BuyFromPrivateStore(BuyFromPrivateStoreRequest) returns (BuyFromPrivateStoreResponse);
  
  // 任务相关
  rpc GetQuestList(GetQuestListRequest) returns (GetQuestListResponse);
  rpc AcceptQuest(AcceptQuestRequest) returns (AcceptQuestResponse);
  rpc CompleteQuest(CompleteQuestRequest) returns (CompleteQuestResponse);
  rpc GetQuestReward(GetQuestRewardRequest) returns (GetQuestRewardResponse);
  rpc AbandonQuest(AbandonQuestRequest) returns (AbandonQuestResponse);
  
  // 公会相关
  rpc GetGuildInfo(GetGuildInfoRequest) returns (GetGuildInfoResponse);
  rpc CreateGuild(CreateGuildRequest) returns (CreateGuildResponse);
  rpc JoinGuild(JoinGuildRequest) returns (JoinGuildResponse);
  rpc LeaveGuild(LeaveGuildRequest) returns (LeaveGuildResponse);
  rpc GuildDonate(GuildDonateRequest) returns (GuildDonateResponse);
  rpc GetGuildSkill(GetGuildSkillRequest) returns (GetGuildSkillResponse);
  rpc UpgradeGuildSkill(UpgradeGuildSkillRequest) returns (UpgradeGuildSkillResponse);
}

// 认证服务 - 登录相关
service AuthService {
  rpc Login(LoginRequest) returns (LoginResponse) {
    option (google.api.http) = {
      post: "/api/v1/auth/login"
      body: "*"
    };
  }
  
  rpc CreateCharacter(CreateCharacterRequest) returns (CreateCharacterResponse) {
    option (google.api.http) = {
      post: "/api/v1/character/create"
      body: "*"
    };
  }
  
  rpc GetCharacterList(CharacterListRequest) returns (CharacterListResponse) {
    option (google.api.http) = {
      get: "/api/v1/character/list"
    };
  }
  
  rpc SelectCharacter(SelectCharacterRequest) returns (SelectCharacterResponse) {
    option (google.api.http) = {
      post: "/api/v1/character/select"
      body: "*"
    };
  }

  // PK 相关
  rpc MultiPlayRequestMatch(MultiPlayRequestMatchRequest) returns (MultiPlayRequestMatchResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/multi_play_request_match"
      body: "*"
    };
  }

  rpc MultiPlayRequestMatchCancel(MultiPlayRequestMatchCancelRequest) returns (MultiPlayRequestMatchCancelResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/multi_play_request_match_cancel"
      body: "*"
    };
  }

  rpc HistoricSiteNoti(HistoricSiteNotiRequest) returns (HistoricSiteNotiResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/historic_site_noti"
      body: "*"
    };
  }

  rpc LoadGuildDonationInfo(LoadGuildDonationInfoRequest) returns (LoadGuildDonationInfoResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/load_guild_donation_info"
      body: "*"
    };
  }

  rpc DreamMazeBasicInfo(DreamMazeBasicInfoRequest) returns (DreamMazeBasicInfoResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/dream_maze_basic_info"
      body: "*"
    };
  }

  rpc RaidEntranceCount(RaidEntranceCountRequest) returns (RaidEntranceCountResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/raid_entrance_count"
      body: "*"
    };
  }

  rpc LoadingProgress(LoadingProgressRequest) returns (LoadingProgressResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/loading_progress"
      body: "*"
    };
  }

  rpc ReturnToTownAtMultiPlay(ReturnToTownAtMultiPlayRequest) returns (ReturnToTownAtMultiPlayResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/return_to_town"
      body: "*"
    };
  }

  rpc CustomGameRoomSetting(CustomGameRoomSettingRequest) returns (CustomGameRoomSettingResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/custom_game_room_setting"
      body: "*"
    };
  }

  rpc PvpRecord(PvpRecordRequest) returns (PvpRecordResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/record"
    };
  }

  rpc PvpRanking(PvpRankingRequest) returns (PvpRankingResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/ranking"
    };
  }

  rpc PvpStats(PvpStatsRequest) returns (PvpStatsResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/stats"
    };
  }

  rpc PvpMatchHistory(PvpMatchHistoryRequest) returns (PvpMatchHistoryResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/match_history"
    };
  }

  rpc PvpSeasonInfo(PvpSeasonInfoRequest) returns (PvpSeasonInfoResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/season_info"
    };
  }

  rpc PvpReward(PvpRewardRequest) returns (PvpRewardResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/reward"
    };
  }

  rpc PvpDailyReset(PvpDailyResetRequest) returns (PvpDailyResetResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/daily_reset"
      body: "*"
    };
  }

  rpc PvpMatchTypes(PvpMatchTypesRequest) returns (PvpMatchTypesResponse) {
    option (google.api.http) = {
      get: "/api/v1/pk/match_types"
    };
  }

  rpc PvpBattleResult(PvpBattleResultRequest) returns (PvpBattleResultResponse) {
    option (google.api.http) = {
      post: "/api/v1/pk/battle_result"
      body: "*"
    };
  }

  // 成就相关
  rpc AchievementInfo(AchievementInfoRequest) returns (AchievementInfoResponse) {
    option (google.api.http) = {
      post: "/api/v1/achievement/info"
      body: "*"
    };
  }

  rpc AchievementReward(AchievementRewardRequest) returns (AchievementRewardResponse) {
    option (google.api.http) = {
      post: "/api/v1/achievement/reward"
      body: "*"
    };
  }

  rpc AchievementList(AchievementListRequest) returns (AchievementListResponse) {
    option (google.api.http) = {
      post: "/api/v1/achievement/list"
      body: "*"
    };
  }

  rpc AchievementBonusReward(AchievementBonusRewardRequest) returns (AchievementBonusRewardResponse) {
    option (google.api.http) = {
      post: "/api/v1/achievement/bonus_reward"
      body: "*"
    };
  }
}
