# Phase 2 背包系统执行追踪

## 前置条件
- ✅ Phase 1.1 认证模块已完成
- ✅ Phase 1.2 角色属性系统已完成
- ✅ Store 层基础架构已就绪
- ✅ 背包表已创建 (bag_item)

## 任务列表

### 🚧 进行中

#### 2.1 GetBag - 获取背包
- [ ] 查询角色所有物品
- [ ] 按格子索引排序
- [ ] 返回物品详细信息
- [ ] 区分装备栏和背包

#### 2.2 MoveItem - 移动物品
- [ ] 验证源格子和目标格子
- [ ] 检查物品存在
- [ ] 处理交换逻辑
- [ ] 更新数据库

#### 2.3 UseItem - 使用物品
- [ ] 验证物品存在
- [ ] 检查使用条件
- [ ] 应用物品效果
- [ ] 减少/删除物品

#### 2.4 SellItem - 出售物品
- [ ] 计算出售价格
- [ ] 验证物品存在
- [ ] 删除物品
- [ ] 增加金币

#### 2.5 EquipItem - 装备物品
- [ ] 验证装备条件
- [ ] 检查职业/等级限制
- [ ] 处理已装备物品
- [ ] 更新装备状态

## 数据结构

### 背包物品 (BagItem)
```go
type BagItem struct {
    ID           uint64
    RoleID       uint64
    ItemID       int32
    GridIndex    int32  // 格子位置
    Count        int32  // 数量
    IsEquipped   bool   // 是否已装备
    BindType     int32  // 0=无绑定, 1=装备绑定, 2=拾取绑定
    Durability   int32  // 耐久度
    EnhanceLevel int32  // 强化等级
    Attributes   string // JSON额外属性
}
```

### 物品类型
- 1-99: 装备 (武器、防具、饰品)
- 100-199: 消耗品 (药水、卷轴)
- 200-299: 材料
- 300-399: 任务物品
- 400+: 其他

## 当前执行状态

**开始时间**: 2026-02-09
**预计完成**: 2026-02-09
**状态**: 🚧 进行中
